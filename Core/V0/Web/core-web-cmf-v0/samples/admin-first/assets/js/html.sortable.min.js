var DragDropTouch;!function(t){"use strict";var e=(Object.defineProperty(s.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dropEffect=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"effectAllowed",{get:function(){return this._effectAllowed},set:function(t){this._effectAllowed=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"types",{get:function(){return Object.keys(this._data)},enumerable:!0,configurable:!0}),s.prototype.clearData=function(t){null!=t?delete this._data[t.toLowerCase()]:this._data={}},s.prototype.getData=function(t){return this._data[t.toLowerCase()]||""},s.prototype.setData=function(t,e){this._data[t.toLowerCase()]=e},s.prototype.setDragImage=function(t,e,s){var i=o._instance;i._imgCustom=t,i._imgOffset={x:e,y:s}},s);function s(){this._dropEffect="move",this._effectAllowed="all",this._data={}}t.DataTransfer=e;var o=(a.getInstance=function(){return a._instance},a.prototype._touchstart=function(t){var e=this;if(this._shouldHandle(t)){if(Date.now()-this._lastClick<a._DBLCLICK&&this._dispatchEvent(t,"dblclick",t.target))return t.preventDefault(),void this._reset();this._reset();var s=this._closestDraggable(t.target);s&&(this._dispatchEvent(t,"mousemove",t.target)||this._dispatchEvent(t,"mousedown",t.target)||(this._dragSource=s,this._ptDown=this._getPoint(t),(this._lastTouch=t).preventDefault(),setTimeout(function(){e._dragSource==s&&null==e._img&&e._dispatchEvent(t,"contextmenu",s)&&e._reset()},a._CTXMENU),a._ISPRESSHOLDMODE&&(this._pressHoldInterval=setTimeout(function(){e._isDragEnabled=!0,e._touchmove(t)},a._PRESSHOLDAWAIT))))}},a.prototype._touchmove=function(t){var e;this._shouldCancelPressHoldMove(t)?this._reset():(this._shouldHandleMove(t)||this._shouldHandlePressHoldMove(t))&&(e=this._getTarget(t),this._dispatchEvent(t,"mousemove",e)?(this._lastTouch=t).preventDefault():(this._dragSource&&!this._img&&this._shouldStartDragging(t)&&(this._dispatchEvent(t,"dragstart",this._dragSource),this._createImage(t),this._dispatchEvent(t,"dragenter",e)),this._img&&((this._lastTouch=t).preventDefault(),this._dispatchEvent(t,"drag",this._dragSource),e!=this._lastTarget&&(this._dispatchEvent(this._lastTouch,"dragleave",this._lastTarget),this._dispatchEvent(t,"dragenter",e),this._lastTarget=e),this._moveImage(t),this._isDropZone=this._dispatchEvent(t,"dragover",e))))},a.prototype._touchend=function(t){this._shouldHandle(t)&&(this._dispatchEvent(this._lastTouch,"mouseup",t.target)?t.preventDefault():(this._img||(this._dragSource=null,this._dispatchEvent(this._lastTouch,"click",t.target),this._lastClick=Date.now()),this._destroyImage(),this._dragSource&&(t.type.indexOf("cancel")<0&&this._isDropZone&&this._dispatchEvent(this._lastTouch,"drop",this._lastTarget),this._dispatchEvent(this._lastTouch,"dragend",this._dragSource),this._reset())))},a.prototype._shouldHandle=function(t){return t&&!t.defaultPrevented&&t.touches&&t.touches.length<2},a.prototype._shouldHandleMove=function(t){return!a._ISPRESSHOLDMODE&&this._shouldHandle(t)},a.prototype._shouldHandlePressHoldMove=function(t){return a._ISPRESSHOLDMODE&&this._isDragEnabled&&t&&t.touches&&t.touches.length},a.prototype._shouldCancelPressHoldMove=function(t){return a._ISPRESSHOLDMODE&&!this._isDragEnabled&&this._getDelta(t)>a._PRESSHOLDMARGIN},a.prototype._shouldStartDragging=function(t){t=this._getDelta(t);return a._THRESHOLD<t||a._ISPRESSHOLDMODE&&a._PRESSHOLDTHRESHOLD<=t},a.prototype._reset=function(){this._destroyImage(),this._dragSource=null,this._lastTouch=null,this._lastTarget=null,this._ptDown=null,this._isDragEnabled=!1,this._isDropZone=!1,this._dataTransfer=new e,clearInterval(this._pressHoldInterval)},a.prototype._getPoint=function(t,e){return t&&t.touches&&(t=t.touches[0]),{x:e?t.pageX:t.clientX,y:e?t.pageY:t.clientY}},a.prototype._getDelta=function(t){if(a._ISPRESSHOLDMODE&&!this._ptDown)return 0;t=this._getPoint(t);return Math.abs(t.x-this._ptDown.x)+Math.abs(t.y-this._ptDown.y)},a.prototype._getTarget=function(t){for(var t=this._getPoint(t),e=document.elementFromPoint(t.x,t.y);e&&"none"==getComputedStyle(e).pointerEvents;)e=e.parentElement;return e},a.prototype._createImage=function(t){this._img&&this._destroyImage();var e,s=this._imgCustom||this._dragSource;this._img=s.cloneNode(!0),this._copyStyle(s,this._img),this._img.style.top=this._img.style.left="-9999px",this._imgCustom||(e=s.getBoundingClientRect(),s=this._getPoint(t),this._imgOffset={x:s.x-e.left,y:s.y-e.top},this._img.style.opacity=a._OPACITY.toString()),this._moveImage(t),document.body.appendChild(this._img)},a.prototype._destroyImage=function(){this._img&&this._img.parentElement&&this._img.parentElement.removeChild(this._img),this._img=null,this._imgCustom=null},a.prototype._moveImage=function(s){var i=this;requestAnimationFrame(function(){var t,e;i._img&&(t=i._getPoint(s,!0),(e=i._img.style).position="absolute",e.pointerEvents="none",e.zIndex="999999",e.left=Math.round(t.x-i._imgOffset.x)+"px",e.top=Math.round(t.y-i._imgOffset.y)+"px")})},a.prototype._copyProps=function(t,e,s){for(var i=0;i<s.length;i++){var o=s[i];t[o]=e[o]}},a.prototype._copyStyle=function(t,e){var s,i;a._rmvAtts.forEach(function(t){e.removeAttribute(t)}),t instanceof HTMLCanvasElement&&(s=t,(i=e).width=s.width,i.height=s.height,i.getContext("2d").drawImage(s,0,0));for(var o=getComputedStyle(t),n=0;n<o.length;n++){var r=o[n];r.indexOf("transition")<0&&(e.style[r]=o[r])}e.style.pointerEvents="none";for(n=0;n<t.children.length;n++)this._copyStyle(t.children[n],e.children[n])},a.prototype._dispatchEvent=function(t,e,s){if(t&&s){var i=document.createEvent("Event"),o=t.touches?t.touches[0]:t;return i.initEvent(e,!0,!0),i.button=0,i.which=i.buttons=1,this._copyProps(i,t,a._kbdProps),this._copyProps(i,o,a._ptProps),i.dataTransfer=this._dataTransfer,s.dispatchEvent(i),i.defaultPrevented}return!1},a.prototype._closestDraggable=function(t){for(;t;t=t.parentElement)if(t.hasAttribute("draggable")&&t.draggable)return t;return null},a);function a(){if(this._lastClick=0,a._instance)throw"DragDropTouch instance already created.";var t,e,s,i,o,n=!1;document.addEventListener("test",function(){},{get passive(){return n=!0}}),navigator.maxTouchPoints&&(t=document,e=this._touchstart.bind(this),s=this._touchmove.bind(this),i=this._touchend.bind(this),o=!!n&&{passive:!1,capture:!1},t.addEventListener("touchstart",e,o),t.addEventListener("touchmove",s,o),t.addEventListener("touchend",i),t.addEventListener("touchcancel",i))}o._instance=new o,o._THRESHOLD=5,o._OPACITY=.5,o._DBLCLICK=500,o._CTXMENU=900,o._ISPRESSHOLDMODE=!1,o._PRESSHOLDAWAIT=400,o._PRESSHOLDMARGIN=25,o._PRESSHOLDTHRESHOLD=0,o._rmvAtts="id,class,style,draggable".split(","),o._kbdProps="altKey,ctrlKey,metaKey,shiftKey".split(","),o._ptProps="pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY".split(","),t.DragDropTouch=o}(DragDropTouch=DragDropTouch||{});

!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.sortable=t()}(this,function(){"use strict";function e(e,t,n){var r=null;return 0===t?e:function(){var a=n||this,o=arguments;clearTimeout(r),r=setTimeout(function(){e.apply(a,o)},t)}}var t,n,r=[],a=[],o=function(e,t,n){return void 0===n?e&&e.h5s&&e.h5s.data&&e.h5s.data[t]:(e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n,void 0)},i=function(e){e.h5s&&delete e.h5s.data},s=function(e,t){return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)},l=function(e,t){if(!t)return Array.prototype.slice.call(e);for(var n=[],r=0;r<e.length;++r)"string"==typeof t&&s(e[r],t)&&n.push(e[r]),t.indexOf(e[r])!==-1&&n.push(e[r]);return n},d=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)d(e[r],t,n);else e.addEventListener(t,n),e.h5s=e.h5s||{},e.h5s.events=e.h5s.events||{},e.h5s.events[t]=n},c=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)c(e[n],t);else e.h5s&&e.h5s.events&&e.h5s.events[t]&&(e.removeEventListener(t,e.h5s.events[t]),delete e.h5s.events[t])},f=function(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)f(e[r],t,n);else e.setAttribute(t,n)},u=function(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)u(e[n],t);else e.removeAttribute(t)},p=function(e){var t=e.getClientRects()[0];return{left:t.left+window.scrollX,top:t.top+window.scrollY}},h=function(e){c(e,"dragstart"),c(e,"dragend"),c(e,"selectstart"),c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},g=function(e){c(e,"dragover"),c(e,"dragenter"),c(e,"drop")},m=function(e,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text","arbitrary-content"),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(t.draggedItem,t.x,t.y)},v=function(e,t){return t.x||(t.x=parseInt(e.pageX-p(t.draggedItem).left)),t.y||(t.y=parseInt(e.pageY-p(t.draggedItem).top)),t},y=function(e){return{draggedItem:e}},b=function(e,t){var n=y(t);n=v(e,n),m(e,n)},E=function(e){i(e),u(e,"aria-dropeffect")},x=function(e){u(e,"aria-grabbed"),u(e,"draggable"),u(e,"role")},w=function(e,t){return e===t||void 0!==o(e,"connectWith")&&o(e,"connectWith")===o(t,"connectWith")},I=function(e,t){var n,r=[];if(!t)return e;for(var a=0;a<e.length;++a)n=e[a].querySelectorAll(t),r=r.concat(Array.prototype.slice.call(n));return r},C=function(e){var t=o(e,"opts")||{},n=l(z(e),t.items),r=I(n,t.handle);g(e),E(e),c(r,"mousedown"),h(n),x(n)},A=function(e){var t=o(e,"opts"),n=l(z(e),t.items),r=I(n,t.handle);f(e,"aria-dropeffect","move"),o(e,"_disabled","false"),f(r,"draggable","true");var a=(document||window.document).createElement("span");"function"!=typeof a.dragDrop||t.disableIEFix||d(r,"mousedown",function(){if(n.indexOf(this)!==-1)this.dragDrop();else{for(var e=this.parentElement;n.indexOf(e)===-1;)e=e.parentElement;e.dragDrop()}})},S=function(e){var t=o(e,"opts"),n=l(z(e),t.items),r=I(n,t.handle);f(e,"aria-dropeffect","none"),o(e,"_disabled","true"),f(r,"draggable","false"),c(r,"mousedown")},D=function(e){var t=o(e,"opts"),n=l(z(e),t.items),r=I(n,t.handle);o(e,"_disabled","false"),h(n),c(r,"mousedown"),g(e)},L=function(e){return e.parentElement?Array.prototype.indexOf.call(e.parentElement.children,e):0},O=function(e){return!!e.parentNode},T=function(e,t){if("string"!=typeof e)return e;var n=document.createElement(t);return n.innerHTML=e,n.firstChild},W=function(e,t){e.parentElement.insertBefore(t,e)},M=function(e,t){e.parentElement.insertBefore(t,e.nextElementSibling)},N=function(e){e.parentNode&&e.parentNode.removeChild(e)},P=function(e,t){var n=document.createEvent("Event");return t&&(n.detail=t),n.initEvent(e,!1,!0),n},_=function(e,t){a.forEach(function(n){w(e,n)&&n.dispatchEvent(t)})},z=function(e){return e.children},Y=function(e){var t=l(z(e),o(e,"items"));return t},q=function(i,c){var u=String(c);if(c=function(e){var t={connectWith:!1,placeholder:null,disableIEFix:!1,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,maxItems:0};for(var n in e)t[n]=e[n];return t}(c),c&&"function"==typeof c.getChildren&&(z=c.getChildren),"string"==typeof i&&(i=document.querySelectorAll(i)),i instanceof window.Element&&(i=[i]),i=Array.prototype.slice.call(i),/serialize/.test(u)){var h=[];return i.forEach(function(e){h.push({list:e,children:Y(e)})}),h}return i.forEach(function(i){if(/enable|disable|destroy/.test(u))return q[u](i);c=o(i,"opts")||c,o(i,"opts",c),D(i);var h,g,m,v,y=l(z(i),c.items),E=c.placeholder;if(E||(E=document.createElement(/^ul|ol$/i.test(i.tagName)?"li":"div")),E=T(E,i.tagName),E.classList.add.apply(E.classList,c.placeholderClass.split(" ")),!i.getAttribute("data-sortable-id")){var x=a.length;a[x]=i,f(i,"data-sortable-id",x),f(y,"data-item-sortable-id",x)}if(o(i,"items",c.items),r.push(E),c.connectWith&&o(i,"connectWith",c.connectWith),A(i),f(y,"role","option"),f(y,"aria-grabbed","false"),c.hoverClass){var I="sortable-over";"string"==typeof c.hoverClass&&(I=c.hoverClass),d(y,"mouseenter",function(){this.classList.add(I)}),d(y,"mouseleave",function(){this.classList.remove(I)})}c.maxItems&&"number"==typeof c.maxItems&&(v=c.maxItems),d(y,"dragstart",function(e){e.stopImmediatePropagation(),c.handle&&!s(e.target,c.handle)||"false"===this.getAttribute("draggable")||(b(e,this),this.classList.add(c.draggingClass),t=this,f(t,"aria-grabbed","true"),h=L(t),n=parseInt(window.getComputedStyle(t).height),g=this.parentElement,m=Y(g),_(i,P("sortstart",{item:t,placeholder:E,startparent:g})))}),d(y,"dragend",function(){var e;t&&(t.classList.remove(c.draggingClass),f(t,"aria-grabbed","false"),t.style.display=t.oldDisplay,delete t.oldDisplay,r.forEach(N),e=this.parentElement,_(i,P("sortstop",{item:t,startparent:g})),h===L(t)&&g===e||_(i,P("sortupdate",{item:t,index:l(z(e),o(e,"items")).indexOf(t),oldindex:y.indexOf(t),elementIndex:L(t),oldElementIndex:h,startparent:g,endparent:e,newEndList:Y(e),newStartList:Y(g),oldStartList:m})),t=null,n=null)}),d([i,E],"drop",function(e){var n;w(i,t.parentElement)&&(e.preventDefault(),e.stopPropagation(),n=r.filter(O)[0],M(n,t),t.dispatchEvent(P("dragend")))});var C=e(function(e,a){if(t)if(y.indexOf(e)!==-1){var o=parseInt(window.getComputedStyle(e).height),i=L(E),s=L(e);if(c.forcePlaceholderSize&&(E.style.height=n+"px"),o>n){var d=o-n,f=p(e).top;if(i<s&&a<f+d)return;if(i>s&&a>f+o-d)return}void 0===t.oldDisplay&&(t.oldDisplay=t.style.display),"none"!==t.style.display&&(t.style.display="none"),i<s?M(e,E):W(e,E),r.filter(function(e){return e!==E}).forEach(N)}else r.indexOf(e)!==-1||l(z(e),c.items).length||(r.forEach(N),e.appendChild(E))},c.debounce),S=function(e){t&&w(i,t.parentElement)&&"true"!==o(i,"_disabled")&&(v&&l(z(i),o(i,"items")).length>=v||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move",C(this,e.pageY)))};d(y.concat(i),"dragover",S),d(y.concat(i),"dragenter",S)}),i};return q.destroy=function(e){C(e)},q.enable=function(e){A(e)},q.disable=function(e){S(e)},q});
