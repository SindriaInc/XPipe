<?php
/** @var $block \Magento\Framework\View\Element\Template */

// Fake data for the prototype â€“ replace with real collection / API call
$apps = [
    ['template_id' => 1,'title' => 'Deploy Minecraft Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/minecraft.png', 'desc' => 'Deploy a new Minecraft on kubernetes', 'price' => 'Included', 'select' => 'deployminecraftkubernetes/index'],
    ['template_id' => 2, 'title' => 'Deploy Minecraft Lightsail', 'icon' => 'Pipelines_TemplateStore::images/minecraft.png', 'desc' => 'Deploy a new Minecraft on AWS lightsail', 'price' => 'Included', 'select' => 'deployminecraftkubernetes/index'],
    ['template_id' => 3,'title' => 'Deploy Minecraft Bare Metal', 'icon' => 'Pipelines_TemplateStore::images/minecraft.png', 'desc' => 'Deploy a new Minecraft on a bare metal', 'price' => 'Included', 'select' => 'deployminecraftkubernetes/index'],
    ['template_id' => 4,'title' => 'Docker Node Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new Docker node on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 5,'title' => 'Docker Node EC2', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new Docker node on AWS EC2', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 6,'title' => 'Bucket S3 Private', 'icon' => 'Pipelines_TemplateStore::images/s3.png', 'desc' => 'Create a new bucket s3 on AWS', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 7,'title' => 'Bucket S3 Public', 'icon' => 'Pipelines_TemplateStore::images/s3.png', 'desc' => 'Create a new bucket s3 on AWS with public access', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 8,'title' => 'EKS Cluster', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new EKS cluster on AWS', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 9,'title' => 'AKS Cluster', 'icon' => 'Pipelines_TemplateStore::images/azure-2.png', 'desc' => 'Create a new AKS cluster on Azure', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 10,'title' => 'RKE2 Cluster Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new rke2 cluster on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 11,'title' => 'RKE2 Cluster EC2', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new rke2 cluster on AWS ec2', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 12,'title' => 'RKE2 Cluster Bare Metal', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new rke2 cluster on bare metal', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 13,'title' => 'OKD Cluster Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new okd cluster on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 14,'title' => 'OKD Cluster EC2', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new okd cluster on AWS EC2', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 15,'title' => 'OKD Cluster Bare Metal', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new okd cluster on bare metal', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 16,'title' => 'Docker Node Azure', 'icon' => 'Pipelines_TemplateStore::images/azure-2.png', 'desc' => 'Create a new Docker node on Azure', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 17,'title' => 'X509 Wildcard Route53', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new X509 wildcard on AWS route53', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 18,'title' => 'X509 Wildcard Azure', 'icon' => 'Pipelines_TemplateStore::images/azure-2.png', 'desc' => 'Create a new X509 wildcard on Azure', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 19,'title' => 'X509 Wildcard OVH', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Create a new X509 wildcard on OVH', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 20,'title' => 'Build Docker Image', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Build a new docker image', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 21,'title' => 'Build SpringBoot Application', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Build a new SpringBoot application', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 22,'title' => 'CI/CD SpringBoot Microservice Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'CI/CD SpringBoot microservice Kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 23,'title' => 'Deploy Wordpress Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Wordpress app on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 24,'title' => 'Deploy Wordpress Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Wordpress app on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 25,'title' => 'Deploy Magento 2 Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Magento 2 app on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 26,'title' => 'Deploy Magento 2 Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Magento 2 app on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 27,'title' => 'Deploy Drupal Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Drupal app on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 28,'title' => 'Deploy Drupal Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Drupal app on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 29,'title' => 'Deploy MySQL 8 Lightsail', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new MySQL on AWS lightsail', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 30,'title' => 'Deploy MySQL 8 RDS', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new MySQL on AWS RDS', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 31,'title' => 'Deploy MySQL 8 Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new MySQL 8 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 32,'title' => 'Deploy ElasticSearch 7 kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new ElasticSearch 7 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 33,'title' => 'Deploy ElasticSearch 8 kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new ElasticSearch 8 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 34,'title' => 'Deploy ELK 7 Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new ELK 7 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 35,'title' => 'Deploy ELK 8 Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new ELK 8 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 36,'title' => 'Deploy Kafka Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Kafka on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 37,'title' => 'Deploy RabbitMQ Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new RabbitMQ on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 38,'title' => 'Deploy WSO2 Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new WSO2 on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 39,'title' => 'Deploy Prometheus Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Prometheus on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 40,'title' => 'Deploy Prometheus+Grafana Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Prometheus+Grafana on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 41,'title' => 'Deploy Monitoring Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new Monitoring on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 42,'title' => 'Deploy APM Kubernetes', 'icon' => 'Pipelines_TemplateStore::images/aws.jpeg', 'desc' => 'Deploy a new APM on kubernetes', 'price' => 'Included', 'select' => 'templatestore/index'],
    ['template_id' => 43,'title' => 'Smart Search',   'icon' => 'Pipelines_TemplateStore::images/sindria-logo.png',    'desc' => 'AI powered search',  'price' => '$19/mo', 'select' => 'templatestore/index'],
    ['template_id' => 44,'title' => 'Loyalty Points', 'icon' => 'Pipelines_TemplateStore::images/sindria-logo.png',   'desc' => 'Reward customers',  'price' => 'Free trial', 'select' => 'templatestore/index'],
];
?>

<link  rel="stylesheet" type="text/css" media="all" href="<?= $block->getViewFileUrl('Pipelines_TemplateStore::css/card-grid.css'); ?>" />

<script type="text/x-magento-init">
    {
        "#templatestore-card-grid": {
            "Pipelines_TemplateStore/js/card-grid": {}
        }
    }
</script>

<div id="templatestore-card-grid" class="appstore-grid">
    <?php foreach ($apps as $app): ?>
        <div class="app-card" data-app='<?= json_encode($app, JSON_HEX_TAG) ?>'>
            <div class="app-card__icon">
                <img src="<?= $block->getViewFileUrl($app['icon']) ?>" alt="" />
            </div>
            <div class="app-card__body">
                <h3 class="app-card__title"><?= $block->escapeHtml($app['title']) ?></h3>
                <p  class="app-card__desc"><?= $block->escapeHtml($app['desc']) ?></p>
            </div>
            <div class="app-card__footer">
                <span class="app-card__price"><?= $block->escapeHtml($app['price']) ?></span>
                <a href="<?= $block->getUrl($app['select']) ?>">
                    <button class="action-primary"><?= __('Select') ?></button>
                </a>

            </div>
        </div>
    <?php endforeach; ?>
</div>
