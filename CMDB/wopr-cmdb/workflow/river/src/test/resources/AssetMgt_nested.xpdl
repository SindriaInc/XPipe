<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<xpdl:Package xmlns="http://www.wfmc.org/2008/XPDL2.1" xmlns:xpdl="http://www.wfmc.org/2008/XPDL2.1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" Id="Package_assetmgt" xsi:schemaLocation="http://www.wfmc.org/2008/XPDL2.1 http://www.wfmc.org/standards/docs/bpmnxpdl_31.xsd">
    <xpdl:PackageHeader>
        <xpdl:XPDLVersion>2.1</xpdl:XPDLVersion>
        <xpdl:Vendor/>
        <xpdl:Created/>
    </xpdl:PackageHeader>
    <xpdl:Script Type="text/java"/>
    <xpdl:TypeDeclarations>
        <xpdl:TypeDeclaration Id="Reference">
            <xpdl:ExternalReference location="org.cmdbuild.workflow.type.ReferenceType"/>
        </xpdl:TypeDeclaration>
        <xpdl:TypeDeclaration Id="References">
            <xpdl:ExternalReference location="org.cmdbuild.workflow.type.ReferenceType&lt;&gt;"/>
        </xpdl:TypeDeclaration>
        <xpdl:TypeDeclaration Id="Lookup">
            <xpdl:ExternalReference location="org.cmdbuild.workflow.type.LookupType"/>
        </xpdl:TypeDeclaration>
        <xpdl:TypeDeclaration Id="Lookups">
            <xpdl:ExternalReference location="org.cmdbuild.workflow.type.LookupType&lt;&gt;"/>
        </xpdl:TypeDeclaration>
    </xpdl:TypeDeclarations>
    <xpdl:Participants>
        <xpdl:Participant Id="System">
            <xpdl:ParticipantType Type="SYSTEM"/>
        </xpdl:Participant>
        <xpdl:Participant Id="SuperUser">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
        <xpdl:Participant Id="ServiceRequestManager">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
        <xpdl:Participant Id="TecnicoInstallatore">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
        <xpdl:Participant Id="Guest">
            <xpdl:ParticipantType Type="ROLE"/>
        </xpdl:Participant>
    </xpdl:Participants>
    <xpdl:Pools>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool1" MainPool="true" Name="Process_assetmgt" Orientation="HORIZONTAL" Process="Process_assetmgt">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool1_lan1" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool2" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="BA-CheckSelection">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool2_lan2" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool3" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="BA-SetClosureData">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool3_lan1" Name="System">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>System</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool3_lan3" Name="ServiceRequestManager">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>ServiceRequestManager</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool4" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="BA-AssetData">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool4_lan1" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool5" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="BA-RM-Review">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool5_lan2" Name="ServiceRequestManager">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>ServiceRequestManager</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool5_lan1" Name="System">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>System</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool5_lan3" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool6" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="BA-Acceptance">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool6_lan2" Name="Guest">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="220,220,220" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>Guest</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool7" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="ASE-CheckEMicrosoft">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool7_lan1" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool8" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="ASE-Assignment">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool8_lan6" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool8_lan1" Name="System">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>System</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool9" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="ASE-Replacement">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool9_lan1" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool9_lan2" Name="System">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>System</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool10" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="ASE-Transer">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool10_lan7" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
                <xpdl:Lane Id="Package_assetmgt_pool10_lan1" Name="System">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="40,145,195" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                    <xpdl:Performers>
                        <xpdl:Performer>System</xpdl:Performer>
                    </xpdl:Performers>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
        <xpdl:Pool BoundaryVisible="true" Id="Package_assetmgt_pool11" MainPool="true" Name="Process_assetmgt_ase1" Orientation="HORIZONTAL" Process="ASE-Reset">
            <xpdl:Lanes>
                <xpdl:Lane Id="Package_assetmgt_pool11_lan1" Name="Expression lane">
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Lane>
            </xpdl:Lanes>
            <xpdl:NodeGraphicsInfos>
                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,215" IsVisible="true" ToolId="JaWE"/>
            </xpdl:NodeGraphicsInfos>
        </xpdl:Pool>
    </xpdl:Pools>
    <xpdl:WorkflowProcesses>
        <xpdl:WorkflowProcess AccessLevel="PUBLIC" Id="Process_assetmgt">
            <xpdl:ProcessHeader/>
            <xpdl:DataFields>
                <xpdl:DataField Id="varRepPolicyInt" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>CMHW0138</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="varRepPolicyExt" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>CMHW0143</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="varRepPolicy" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="varRepAssegnazioneInt" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>CMHW5138</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="varRepAssegnazioneExt" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>CMHW5143</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="varRepAssegnazione" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="selectedSoftware" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="References"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="selectedHardwareToWithdraw" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="References"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="selectedHardwareToAssign" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="References"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="selectedHardware" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="References"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="rowSeparator" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>%%</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="requestToCancel" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="previousState" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="orderRowsIdList" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="orderRows" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="newassets" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="loggerLibrary" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>import org.cmdbuild.shark.Logging;
import org.slf4j.LoggerFactory;
import org.slf4j.Logger;

logger = LoggerFactory.getLogger(Logging.LOGGER_NAME);</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="keyvalueSeparator" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>==</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="iterator" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="functionLibrary" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>import com.google.common.base.Predicate;
import com.google.common.collect.Iterables;
import com.google.common.collect.Lists;
import org.cmdbuild.services.soap.AttributeSchema;
import org.cmdbuild.services.soap.Private;
import org.cmdbuild.api.fluent.ws.ClassAttribute;
import org.cmdbuild.api.fluent.ws.WsFluentApiExecutor.WsType;
import org.apache.commons.lang3.StringUtils;


isReference(classname, attributename){
	
	attribute = ClassAttribute.classAttribute(classname, attributename);
	type = cmdb.findAttributeFor(attribute).getWsType();
	return type == WsType.REFERENCE;
	
}

isValidValueForReference(input){
	return !StringUtils.isBlank(input) &amp;&amp; Long.parseLong(input) &gt; 0;
}

isValidValue(input){
	return !StringUtils.isBlank(input);
}

clearRelationList(domainName) {
	cardList = cmdb.queryRelations(ProcessClass, ProcessId)
		.withDomain(domainName)
		.fetch();

	for (card: cardList) {
		cmdb.existingRelation(domainName)
			.withCard1(ProcessClass, ProcessId)
			.withCard2(card.getClassName(), card.getId())
			.delete();
	}
}

checkComputer(className) {
	return className.equalsIgnoreCase("Client");
}</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="formModel" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="formLibrary" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.text.DateFormat;
import java.text.SimpleDateFormat;
import org.apache.commons.lang3.StringUtils;

import org.cmdbuild.shark.Logging;
import org.slf4j.LoggerFactory;
import org.slf4j.Logger;

logger = LoggerFactory.getLogger(Logging.LOGGER_NAME);

String findFormName (classname) {
	logger.debug("find form name for class {}", classname);

	spResult = cmdb.callFunction("wf_assetmgt_formname") //
			.with("classname", classname) //
			.execute();

	formName = spResult.get("FormName");
	logger.debug("form name is {}", formName);

	return formName;

}

// Given a form name, load the model for the customForm widget
String loadFormModel (String formName) {
	String formModel;

	// Create a structure which allows to order the parameters by index
	Set objects = new TreeSet(new Comparator() {
		int compare(JSONObject o0, JSONObject o1) {
			try {
				Integer index0 = new Integer(o0.getInt("index"));
				Integer index1 = new Integer(o1.getInt("index"));
				return index0.compareTo(index1);
			} catch(JSONException e) {
				throw new RuntimeException(e);
			}
		}
	});
	
	formId = cmdb.queryClass("AMForm")
		.withCode(formName)
		.fetch()
		.get(0)
		.getId();

	logger.debug("formId is {}", formId);

	// Load the parameters into the database and build the formModel
	parameters = cmdb.queryClass("AMFormField")
			.with("Form", formId)
			.fetch();

	logger.debug("parameters are {}", parameters);

	JSONArray a = new JSONArray();
	JSONObject o;
	String[] metadata;
	String[] keyValue;
	String key;
	String value;
	String filterExpression;
	String targetName;
	String targetType;
	JSONObject filterContext;
	for ( param : parameters ) {
	
		logger.debug("param is {}", param);
		
		o = new JSONObject();

		value = param.get("Name");

		logger.debug("field name is {}", value);

		if ( StringUtils.isNotBlank(value) ) {
			o.put("name", value);
		}
		value = param.get("Description");

		logger.debug("field description is {}", value);

		if ( StringUtils.isNotBlank(value) ) {
			o.put("description", value);
		}
		value = param.get("Type");
		if ( StringUtils.isNotBlank(value) ) {
			o.put("type", value);
		}
		value = String.valueOf(param.get("Index"));
		if ( StringUtils.isNotBlank(value) ) {
			o.put("index", value);
		}

		metadata = param.get("Metadata").split("\\|");
		for ( String md : metadata ) {
			keyValue = md.split(":");
			if ( keyValue.length &lt; 2 ) continue;
			key = keyValue[0].trim();				
			value = keyValue[1].trim();
			switch(key) {
			case "lookupType":
			case "targetClass":
				o.put(key, value);
				break;
			case "length":
				o.put(key, Integer.valueOf(value));
			case "precision":
			case "scale": 
				o.put(key, Integer.valueOf(value));					
				break;
			case "showColumn":
			case "mandatory":
			case "writable": 
				o.put(key, Boolean.valueOf(value));
				break;
			case "target-type": 
			case "target-name": 
				if ( "target-type".equals(key) ) {
					targetType = value;
				} else {
					targetName = value;
				}
				if ( StringUtils.isNotBlank(targetName) &amp;&amp;  StringUtils.isNotBlank(targetType) ) {
					JSONObject target = new JSONObject();
					target.put("name", targetName);
					target.put("type", targetType);
					o.put("target", target);
				}
				break;
			case "filter-expression": 
			case "filter-context": 
				if ( "filter-expression".equals(key) ) {
					filterExpression = value;
				} else {
					filterContext = new JSONObject();
					if(StringUtils.isNotBlank(value)) {
						throw new UnsupportedOperationException("Unsupported filter contexts, must be blank");
					}
				}
				if ( StringUtils.isNotBlank(filterExpression) &amp;&amp; filterContext != null ) {
					JSONObject filter = new JSONObject();
					filter.put("expression", filterExpression);
					filter.put("context", filterContext);
					o.put("filter", filter);
				}
				break;
			case "index":
				break;
			default: 
				throw new UnsupportedOperationException("Unsupported parameter property: " + key);
			}
		}

		objects.add(o);
	}
	for(JSONObject so : objects) {
		so.remove("index");
		a.put(so);
	}

	formModel = a.toString();
	logger.warn("\n--- formModel -----------------------------------------------\n" + 
			           formModel +  "\n" +
         		  "-------------------------------------------------------------");
	return formModel;
}</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="formEAMModel" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>[{"type": "reference","name": "Computer","description": "Computer","targetClass": "Computer","writable": "false","hidden":"true"},{"type": "string","name": "EDPNumber","length": 100, "description": "EDP Number","writable": "false"},{"type": "lookup","name": "EAMicrosoft","lookupType": "Computer - EA_Microsoft","description": "EA Microsoft","writable": "true","mandatory":"true"}]</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="exit" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="error" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="currentGroup" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="computerEAMlist" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="className" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="attrSeparator" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                    <xpdl:InitialValue>%</xpdl:InitialValue>
                </xpdl:DataField>
                <xpdl:DataField Id="Wrhouse" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="UtilizzatoreID" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="UniqueProcessDefinition" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Type" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="TechnicianNotes" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Technician" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Supplier" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Subject" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="SendEmail" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Section2" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Section1" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="SameUser" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="RealStartDate" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Process_assetmgt_df1" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ProcessStatus" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ProcessCode" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="PolicyAction" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="PolicyAcceptanceMessage" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Policy" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="PlannedStartDate" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="PlannedEndDate" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Parent" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Outcome" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrigWrhouse" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrigUserWithdrawal" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrigUser" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrigRoom" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrderRowQty" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrderRowModel" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrderRowCMDBClass" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrderRowBrand" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="OrderRow" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Order" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Number" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Notes" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="MissingAcceptance" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Message" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ManagerNotes" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="IgnoreFinalUser" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Hardware" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="GRHeaderAction" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="GRAssetsAction" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="FlowStatus" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="FinalUser" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="FinalAction" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ExtDescription" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ExecAction" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Employment2" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Employment" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="EDPNumberWithdrawal" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="EDPNumber" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="DstWrhouse" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="DstUser" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="DstStatus" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="DstRoom" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Reference"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Destination2" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Destination" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:DeclaredType Id="Lookup"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Description" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="CreationTimestamp" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Confirm" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Code" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="STRING"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="ClosureTimestamp" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="DATETIME"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="Cancel" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="BOOLEAN"/>
                    </xpdl:DataType>
                </xpdl:DataField>
                <xpdl:DataField Id="AssegnatarioID" IsArray="false">
                    <xpdl:DataType>
                        <xpdl:BasicType Type="INTEGER"/>
                    </xpdl:DataType>
                </xpdl:DataField>
            </xpdl:DataFields>
            <xpdl:ActivitySets>
                <xpdl:ActivitySet Id="BA-CheckSelection">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act13">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool2_lan2" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="72" YCoordinate="72"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act14">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool2_lan2" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="639" YCoordinate="75"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS13-CheckSelection" Name="SYS13 - Check selection">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">Message = null;
Confirm = true;
if(selectedHardware == null || selectedHardware.length == 0){
	Message = cmdb.selectLookupByCode("ITProc - Message","AM-EmptySelection");
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool2_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="267" YCoordinate="59"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM12-ConfirmSelection" Name="AM12 - Confirm selection">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Confirm"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool2_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="513" YCoordinate="62"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act16">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Exclusive">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra40"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra41"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool2_lan2" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="387" YCoordinate="69"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="SYS13-CheckSelection" Id="Process_assetmgt_tra37" To="Process_assetmgt_act16">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM12-ConfirmSelection" Id="Process_assetmgt_tra38" To="Process_assetmgt_act14">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act13" Id="Process_assetmgt_tra39" To="SYS13-CheckSelection">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act16" Id="Process_assetmgt_tra41" To="Process_assetmgt_act14">
                            <xpdl:Condition Type="CONDITION">Message == null</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="443" YCoordinate="21"/>
                                    <xpdl:Coordinates XCoordinate="687" YCoordinate="21"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act16" Id="Process_assetmgt_tra40" To="AM12-ConfirmSelection">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="BA-SetClosureData">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act18">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool3_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="51" YCoordinate="66"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act19">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool3_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="426" YCoordinate="71"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS14-SetClosureData" Name="SYS14 - Set closure data">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">ClosureTimestamp = Calendar.getInstance().getTime();
ProcessStatus = cmdb.selectLookupByCode("ITProc - ProcessStatus","Closed");
Confirm = null;
Message = null;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool3_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="127" YCoordinate="54"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS15-ResumeParent" Name="SYS15 - Resume Parent">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">if(Parent!=null &amp;&amp; Parent.getId()&gt;0) {
	parentProcess=cmdb.cardFrom(Parent);
	parentClassName=parentProcess.getClassName();
	parentId=parentProcess.getId();
	
	cmdb.existingProcessInstance(parentClassName, parentId).resume();
	
	if(requestToCancel)
		cmdb.existingProcessInstance(parentClassName, parentId).with("RealEndDate",ClosureTimestamp).with("RealStartDate",RealStartDate).with("Cancel",true).update();
	else
		cmdb.existingProcessInstance(parentClassName, parentId).with("RealEndDate",ClosureTimestamp).with("RealStartDate",RealStartDate).update();
	/*
	if(requestToCancel)
		cmdb.existingProcessInstance(parentClassName, parentId).with("Cancel",true).with("CurrentUser",_CurrentUser).advance();
	else
		cmdb.existingProcessInstance(parentClassName, parentId).with("CurrentUser",_CurrentUser).advance();
	*/
}

if(Boolean.valueOf(MissingAcceptance))
	Message = cmdb.selectLookupByCode("ITProc - Message","AM-MissingAcceptance");</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra82"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra47"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool3_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="261" YCoordinate="54"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM20-MissingPolicy" Name="AM20 - Missing Policy">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>ServiceRequestManager</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="MissingAcceptance"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool3_lan3" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="261" YCoordinate="32"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="Process_assetmgt_act18" Id="Process_assetmgt_tra46" To="SYS14-SetClosureData">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS14-SetClosureData" Id="Process_assetmgt_tra111" To="SYS15-ResumeParent">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS15-ResumeParent" Id="Process_assetmgt_tra82" To="AM20-MissingPolicy">
                            <xpdl:Condition Type="CONDITION">Boolean.valueOf(MissingAcceptance)</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS15-ResumeParent" Id="Process_assetmgt_tra47" To="Process_assetmgt_act19">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM20-MissingPolicy" Id="Process_assetmgt_tra90" To="Process_assetmgt_act19">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="BA-AssetData" Name="BA - Assets data">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act31">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="74" YCoordinate="95"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act32">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="1113" YCoordinate="103"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM02c-GRDelivery1" Name="AM02c - Goods receipt (delivered assets)">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRow"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowCMDBClass"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowBrand"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowModel"/>
                                <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Edit delivered assets&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_assetmgt_newassets&quot;&#13;&#10;orderrow=&quot;{server:OrderRow.Id}&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;false&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;false&quot;&#13;&#10;ExportDisabled=&quot;false&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;newassets"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Add attachment&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="296" YCoordinate="86"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS02c.1-CreateAssets1" Name="SYS02c.1 - Create assets">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">import org.cmdbuild.api.fluent.NewCard;

eval(loggerLibrary);
eval(functionLibrary);

error = false; 

try{
	String classname = cmdb.selectLookupById(OrderRowCMDBClass.getId()).getCode();
	String[] parts = newassets.split(rowSeparator);

	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);
	
		NewCard newCard = cmdb.newCard(classname);
		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length &lt; 2){
				if(StringUtils.contains(attribute,"EDPNumber")) {
					logger.warn("checking EDP {}",attribute);
					Message = cmdb.selectLookupByCode("ITProc - Message", "AM-ErrorMandatoryFieldsAssets");
					error = true;
					break;
				} else
					logger.warn("attribute {} does not contain EDPNumber",attribute);
				continue;
			}
			String name = keyValue[0];
			String value = keyValue[1];
			logger.warn("name is {}",name);
			logger.warn("string value is {}",value);

			if(name=="EDPNumber" &amp;&amp; !isValidValue(value)) {
				Message = cmdb.selectLookupByCode("ITProc - Message", "AM-ErrorMandatoryFieldsAssets");
				error = true;
				break;
			}

			if(isReference(classname, name) &amp;&amp; !isValidValueForReference(value)){
				logger.warn("skip invalid value {} for reference {}",value,name);
				continue;
			}
			newCard.with(name,value);
		}

		if(!error) {

			newasset_cd = newCard.create();
	
			cmdb.newRelation("AssetMgtCI") //
				.withCard1("AssetMgt",  ProcessId) //
				.withCard2("CI",  newasset_cd.getId()) //
				.create();

			cmdb.callFunction("wf_assetmgt_direction")
				.with("hardwareid",  newasset_cd.getId())
				.with("processid", ProcessId)
				.with("direction","+")
				.execute();
		}
	}

	if(!error) {

		orderRowCard = cmdb.existingCard("PurchaseOrderRow",OrderRow.getId()).fetch();
		totDeliveredQuantity = orderRowCard.get("DeliveredQuantity") + orderRowCard.get("DeliveryQuantity");

		cmdb.existingCard("PurchaseOrderRow",OrderRow.getId()) //
			.with("DeliveredQuantity",totDeliveredQuantity)
			.with("DeliveryQuantity",0)
			.update();

		Message = cmdb.selectLookupByCode("ITProc - Message", "AM-CheckNewAssets");
		iterator = iterator + 1;
	}

}catch(Throwable t){
	Message = cmdb.selectLookupByCode("ITProc - Message", "AM-ErrorCreatingAssets");
	error = true;
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="425" YCoordinate="83"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYSBA03-SetClassName">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">// reset custom form

newassets = null;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="151" YCoordinate="82"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM02d-CheckAssetsData" Name="AM02d - Goods receipt (check assets data)">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRow"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowCMDBClass"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowBrand"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowModel"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;CI&quot;&#13;&#10;ButtonLabel=&quot;New assets&quot;&#13;&#10;NoSelect=1&#13;&#10;Filter=&quot;from Hardware where Id in (/( SELECT map.&quot;IdObj2&quot; FROM &quot;Map_AssetMgtCI&quot; map JOIN &quot;AssetMgt&quot; am ON am.&quot;Id&quot; = map.&quot;IdObj1&quot; AND am.&quot;Id&quot;={xa:processid} WHERE map.&quot;Status&quot; = 'A')/)&quot;&#13;&#10;AllowCardEditing=&quot;true&quot;&#13;&#10;processid=ProcessId"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="637" YCoordinate="85"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act35">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Exclusive">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra96"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra100"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="557" YCoordinate="91"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM02e-QRCodePrint" Name="AM02e - Goods receipt (QRCodes and Barcodes Print)">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRow"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowCMDBClass"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowBrand"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrderRowModel"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ButtonLabel=&quot;Barcode&quot;&#13;&#10;ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;AM-BarcodePrint&quot;&#13;&#10;IdProcess=ProcessId&#13;&#10;ReadOnlyAttributes=&quot;IdProcess&quot;&#13;&#10;ForcePDF=1"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;QRCode&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="959" YCoordinate="89"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS02d.1-QRCodePrint" Name="SYS02d.1 - Print QRCodes and Barcodes">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Hashtable;

import javax.imageio.ImageIO;

import org.apache.commons.lang3.StringUtils;

import com.google.zxing.BarcodeFormat;
import com.google.zxing.EncodeHintType;
import com.google.zxing.WriterException;
import com.google.zxing.common.BitMatrix;
import com.google.zxing.qrcode.QRCodeWriter;
import com.google.zxing.qrcode.decoder.ErrorCorrectionLevel;

import org.apache.pdfbox.pdmodel.PDDocument;
import org.apache.pdfbox.pdmodel.PDPage;
import org.apache.pdfbox.pdmodel.PDPageContentStream;
import org.apache.pdfbox.pdmodel.graphics.image.JPEGFactory;
import org.apache.pdfbox.pdmodel.graphics.image.PDImageXObject;


String filePath = "/tmp/temp.jpg";
String documentPath = "/tmp/qrcodes.pdf";
String docName = "qrcodes.pdf";

int size = 125;
String fileType = "JPEG";
File myFile = new File(filePath);

int TOP_MARGIN = 30*2;
int LINE_SPACE = 20*2;
int MATRIX_SIZE = 90*2;
int IMAGE_WIDTH = 193*2;
int IMAGE_HEIGHT = 94*2;
int A4_HEIGHT = 600;

final Hashtable hintMap = new Hashtable();
hintMap.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.L);
final QRCodeWriter qrCodeWriter = new QRCodeWriter();

spResult = cmdb.callFunction("wf_assetmgt_linkedhwids")
	.with("processid",ProcessId);
	

relatedHwList = cmdb.queryRelations(ProcessClass,ProcessId)
	.withDomain("AssetMgtCI")
	.fetch();



try {
	
	if(relatedHwList!=null) {	
		// initialize position, document and first page
		int heightPosition = A4_HEIGHT;
		PDDocument pdfDoc = new PDDocument();
		PDPage docPage = new PDPage();

		// Start a new content stream which will "hold" the to be created content
		PDPageContentStream contentStream = new PDPageContentStream(pdfDoc, docPage);
	
	
		for (cardRef : relatedHwList) {		
		
			hardware = cmdb.cardFrom(cmdb.referenceTypeFrom(cardRef.getId()));
			classname = hardware.getClassName();
			code = hardware.getCode();
		
			String urlToEncode = "classes/" + classname + "/cards/Code~" + code + "/";
			String fileName = "qrcode_" + classname + "_" + code + ".png";
			String fileDescr = "QR code " + classname + " " + code;
		
			// set url to encode for selected
			final BitMatrix byteMatrix = qrCodeWriter.encode(urlToEncode, BarcodeFormat.QR_CODE, MATRIX_SIZE, MATRIX_SIZE, hintMap);
			final BufferedImage image = new BufferedImage(IMAGE_WIDTH, IMAGE_HEIGHT, BufferedImage.TYPE_INT_RGB);
			image.createGraphics();

			final Graphics2D graphics = (Graphics2D) image.getGraphics();
			graphics.setColor(Color.WHITE);
			graphics.fillRect(0, 0, IMAGE_WIDTH, IMAGE_HEIGHT);
			graphics.setColor(Color.BLACK);
			for (int i = 0; i &lt; MATRIX_SIZE; i++) {
				for (int j = 0; j &lt; MATRIX_SIZE; j++) {
					if (byteMatrix.get(i, j)) {
						graphics.fillRect(i, j, 1, 1);
					}
				}
			}
			String hostname = StringUtils.substring(hardware.get("Hostname"),0,20);

			graphics.setFont(new Font("SansSerif", Font.BOLD, 14));
			graphics.drawString(StringUtils.substring(hostname, 0, 20), MATRIX_SIZE-5, TOP_MARGIN);

			ImageIO.write(image, fileType, myFile);
		
			// convert image to be used in the pdf doc
			PDImageXObject img = JPEGFactory.createFromStream(pdfDoc, new FileInputStream(new File(filePath)));
				
			// if the end of the page is reached, save current stream and change page
			if ( heightPosition&lt;=0 ) {
				contentStream.close();
				pdfDoc.addPage( docPage );
				docPage = new PDPage();
				contentStream = new PDPageContentStream(pdfDoc, docPage);
				heightPosition = A4_HEIGHT;
			}
		
			// draw image in current stream 
			contentStream.drawImage(img,0,heightPosition);
			//update position for next image
			heightPosition = heightPosition - IMAGE_HEIGHT;
			myFile.delete();
		}
		// at the end close the stream and save last page
		contentStream.close();
		pdfDoc.addPage( docPage );
		// save the document 
		pdfDoc.save(documentPath);
	
		File myDoc = new File(documentPath);
		cmdb.existingCard(ProcessClass,ProcessId) //
			.attachments() //
			.upload(docName, "Hardware QR code", "Document", myDoc.toURI().toURL().toString());

		myDoc.delete();
	}
	Message = cmdb.selectLookupByCode("ITProc - Message", "AM-DownloadCodes");		
} catch(e) {
	logger.error("Error creating QR codes: {}",e.getMessage());
	eStr = org.apache.commons.lang.exception.ExceptionUtils.getStackTrace(e);
	logger.error("Details: {}",eStr);
	Message = cmdb.selectLookupByCode("ITProc - Message", "AM-ErrorCodes");
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool4_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="790" YCoordinate="87"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="Process_assetmgt_act31" Id="Process_assetmgt_tra95" To="SYSBA03-SetClassName">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM02c-GRDelivery1" Id="Process_assetmgt_tra97" To="SYS02c.1-CreateAssets1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS02c.1-CreateAssets1" Id="Process_assetmgt_tra98" To="Process_assetmgt_act35">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYSBA03-SetClassName" Id="Process_assetmgt_tra99" To="AM02c-GRDelivery1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS02d.1-QRCodePrint" Id="Process_assetmgt_tra27" To="AM02e-QRCodePrint">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act35" Id="Process_assetmgt_tra96" To="AM02d-CheckAssetsData">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act35" Id="Process_assetmgt_tra100" Name="error" To="AM02c-GRDelivery1">
                            <xpdl:Condition Type="CONDITION">error</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,102,102" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="484" YCoordinate="38"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM02d-CheckAssetsData" Id="Process_assetmgt_tra109" To="SYS02d.1-QRCodePrint">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM02e-QRCodePrint" Id="Process_assetmgt_tra110" To="Process_assetmgt_act32">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="BA-RM-Review">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act30">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool5_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="68" YCoordinate="52"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act36">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool5_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="649" YCoordinate="52"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM12-RMClosure" Name="AM11 - Request Manager Closure">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>ServiceRequestManager</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="FinalAction"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM11-Schedule-ToUser&quot;&#13;&#10;Condition=&quot;{js:AM11-Schedule-ToUser-condition}&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool5_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="142" YCoordinate="25"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS012-PostScheduling" Name="SYS012 - Post Scheduling">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">FinalAction=null;

if("POS".equalsIgnoreCase(Outcome.getCode())) {
	FinalAction = cmdb.selectLookupByCode("AssetMgt - FinalAction","COM");
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra175"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra174"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool5_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="145" YCoordinate="38"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS012-PrepareScheduling" Name="SYS012 - Prepare Scheduling">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(functionLibrary);

Outcome = null;

if("BAC".equalsIgnoreCase(FinalAction.getCode())) {
	currentGroup ="ServiceRequestManager";
	// clear relations
	clearRelationList("AssetMgtCI");
	clearRelationList("AssetMgtSWCatalogue");

	// update flag
	if(selectedHardware!=null) {
		for(refHW : selectedHardware){
			cmdb.existingCard("Hardware",refHW.getId())
				.with("Busy",false)
				.update();
		}
	}
	if(selectedHardwareToAssign!=null) {
		for(refHW : selectedHardwareToAssign){
			cmdb.existingCard("Hardware",refHW.getId())
				.with("Busy",false)
				.update();
		}
	}
	if(selectedHardwareToWithdraw!=null) {
		for(refHW : selectedHardwareToWithdraw){
			cmdb.existingCard("Hardware",refHW.getId())
				.with("Busy",false)
				.update();
	}
}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra61"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra72"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool5_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="281" YCoordinate="37"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS21-CancelReset" Name="SYS20 Cancel Parent and reset">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">requestToCancel=true;

// update flag
if(selectedHardware!=null) {
	for(refHW : selectedHardware){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}
if(selectedHardwareToAssign!=null) {
	for(refHW : selectedHardwareToAssign){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}
if(selectedHardwareToWithdraw!=null) {
	for(refHW : selectedHardwareToWithdraw){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool5_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="456" YCoordinate="93"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM11a-RMClosure" Name="AM11 - Request Manager Closure">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>ServiceRequestManager</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="FinalAction"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM11-Schedule-ToUser&quot;&#13;&#10;Condition=&quot;{js:AM11-Schedule-ToUser-condition}&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool5_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="281" YCoordinate="27"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="Process_assetmgt_act30" Id="Process_assetmgt_tra136" To="SYS012-PostScheduling">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM11a-RMClosure" Id="Process_assetmgt_tra67" To="SYS012-PrepareScheduling">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM12-RMClosure" Id="Process_assetmgt_tra68" To="SYS012-PrepareScheduling">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS012-PrepareScheduling" Id="Process_assetmgt_tra61" To="SYS21-CancelReset">
                            <xpdl:Condition Type="CONDITION">"CAN".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS012-PrepareScheduling" Id="Process_assetmgt_tra72" To="Process_assetmgt_act36">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS21-CancelReset" Id="Process_assetmgt_tra138" To="Process_assetmgt_act36">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS012-PostScheduling" Id="Process_assetmgt_tra174" Name="Generic" To="AM11a-RMClosure">
                            <xpdl:Condition Type="CONDITION">"Generic".equals(Type.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS012-PostScheduling" Id="Process_assetmgt_tra175" To="AM12-RMClosure">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="BA-Acceptance">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act37">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="52" YCoordinate="57"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act39">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="574" YCoordinate="60"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS-SendAcceptanceMail">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">import java.text.DateFormat;
import java.text.SimpleDateFormat;

// attach report and send mail for policy acceptance
/*
spResult = cmdb.callFunction("wf_piaggio_assetmgt_preparemail")
	.with("processid",ProcessId)
	.with("mailtemplate","AM-PolicyAcceptance")
	.execute();

// draft mail ID 
mailId = spResult.get("emailid");

policyReport = cmdb.createReport("CMHW5123_110002","pdf")
	.with("ProcessID",ProcessId)
	.with("Azienda","IT10")
	.with("Lingua","IT")
	.with("PrimaConsegna","true")
	.download();

cmdb.existingCard("Email",mailId)
	.withAttachment(policyReport.getUrl(), "CMHW5123_110002.pdf", "Document", "Policy")
	.update();

// send e-mail
spResult = cmdb.callFunction("wf_sendmail")
	.with("emailid",mailId)
	.execute();

*/
// Message for Portal
PolicyAcceptanceMessage="&lt;p&gt;In relazione alla mia richiesta di ";
PolicyAcceptanceMessage=PolicyAcceptanceMessage + Subject;
PolicyAcceptanceMessage=PolicyAcceptanceMessage + " n. " + String.valueOf(Number);
PolicyAcceptanceMessage=PolicyAcceptanceMessage + " del " + new SimpleDateFormat("dd/MM/yyyy").format(CreationTimestamp).toString();
PolicyAcceptanceMessage=PolicyAcceptanceMessage + ", dichiaro di aver preso visione e di accettare quanto riportato nella seguente documentazione che mi &amp;egrave; stata inviata per posta elettronica:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Lettera di assegnazione apparecchiature informatiche&lt;/li&gt;&lt;li&gt;Abilitazione assegnate per accesso alle applicazioni aziendali&lt;/li&gt;&lt;li&gt;Regolamenti aziendali per l'uso di risorse IT&lt;/li&gt;&lt;/ul&gt;";</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="195" YCoordinate="44"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM-PolicyAcceptance" Name="AM - Policy Acceptance">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>Guest</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PolicyAcceptanceMessage"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PolicyAction"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="321" YCoordinate="45"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act24">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="117" YCoordinate="51"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS-TechnicianMessage">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">if ( "R".equalsIgnoreCase(PolicyAction.getCode()) ) {
	Outcome = cmdb.selectLookupByCode("AssetMgt - Outcome","NEG");
	TechnicianNotes = "L'utente ha rifiutato le policies da portale";
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool6_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="446" YCoordinate="45"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="SYS-SendAcceptanceMail" Id="Process_assetmgt_tra180" To="AM-PolicyAcceptance">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act37" Id="Process_assetmgt_tra104" To="Process_assetmgt_act24">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM-PolicyAcceptance" Id="Process_assetmgt_tra105" To="SYS-TechnicianMessage">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS-TechnicianMessage" Id="Process_assetmgt_tra106" To="Process_assetmgt_act39">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act24" Id="Process_assetmgt_tra91" To="SYS-SendAcceptanceMail">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="ASE-CheckEMicrosoft">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act21">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool7_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="59" YCoordinate="154"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act26">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool7_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="246" YCoordinate="155"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="CheckEMicrosoft" Name="Check EMicrosoft">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Update EAM field&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formEAMModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_piaggio_am_eamlist&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;true&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;true&quot;&#13;&#10;ExportDisabled=&quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;computerEAMlist"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool7_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="129" YCoordinate="17"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS-CheckEMicrosoft">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);
isEAMValid = true;

if(computerEAMlist != null &amp;&amp; computerEAMlist!= "") {

	String[] parts = computerEAMlist.split(rowSeparator);
	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);

		eam = "";
		computerID = "";

		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length&gt;1) {		
				String name = keyValue[0];
				String value = keyValue[1];
				logger.warn("name is {}",name);
				logger.warn("string value is {}",value);
				if(name.equalsIgnoreCase("EAMicrosoft")) 
					eam = value;
				if(name.equalsIgnoreCase("Computer")) 
					computerID = value;
			}
		}
	
		try {
			if(!isValidValue(eam) || !StringUtils.isNumeric(eam))  {
				isEAMValid = false;
				continue;
			}
		} catch(e) {
			isEAMValid = false;
			continue;
		}
	}
} else
	logger.warn("Eam computer list empty");
	
if(!isEAMValid)
	Message = cmdb.selectLookupByCode("ITProc - Message","AM-CheckEAMicrosoft");
else
	Message = null;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra53"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra54"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool7_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="127" YCoordinate="142"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="Process_assetmgt_act21" Id="Process_assetmgt_tra52" To="SYS-CheckEMicrosoft">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS-CheckEMicrosoft" Id="Process_assetmgt_tra53" To="Process_assetmgt_act26">
                            <xpdl:Condition Type="CONDITION">Message == null</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="CheckEMicrosoft" Id="Process_assetmgt_tra185" To="SYS-CheckEMicrosoft">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="233" YCoordinate="106"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS-CheckEMicrosoft" Id="Process_assetmgt_tra54" To="CheckEMicrosoft">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="ASE-Assignment">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act29">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="94" YCoordinate="41"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM04-Assignment1" Name="AM04 - Assignment">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra179"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra511"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="OrigWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to assign&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on h.&quot;State&quot; = l.&quot;Id&quot; and l.&quot;Status&quot; = 'A' and l.&quot;Code&quot; = 'Available' where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and h.&quot;Status&quot; = 'A' and h.&quot;Room&quot;::text='{client:OrigWrhouse.Id}')/)&quot;&#13;&#10;Required=0&#10;selectedHardware"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware currently assigned to the user&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; where &quot;Assignee&quot;::text = '{client:DstUser.Id}')/)&quot;&#13;&#10;NoSelect=1"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10;ButtonLabel=&quot;Software to install&quot;&#13;&#10;Filter=&quot;from SWCatalogue where Id in (/( select &quot;Id&quot; from &quot;SWCatalogue&quot; where &quot;Status&quot;='A' and &quot;Type&quot; is not null )/)&quot;&#13;&#10;selectedSoftware"/>
                                <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:DstUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;User data&quot;"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM04-Assignment-ToUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="165" YCoordinate="28"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM04b-Check1" Name="AM04b - Check">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="MissingAcceptance"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                                <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Update EAM field&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formEAMModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_piaggio_am_eamlist&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;true&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;true&quot;&#13;&#10;ExportDisabled=&quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;computerEAMlist"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="286" YCoordinate="157"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM04c-Execution1" Name="AM04c - Execution">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="ExecAction"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=varRepAssegnazione&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="400" YCoordinate="158"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA-CheckEAMicrosoft3">
                            <xpdl:BlockActivity ActivitySetId="ASE-CheckEMicrosoft"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="288" YCoordinate="258"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA04-Policy1">
                            <xpdl:BlockActivity ActivitySetId="BA-Acceptance"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="511" YCoordinate="252"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM04c-Confirmation1" Name="AM04c - Confirmation">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PolicyAction"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5138&quot;&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="647" YCoordinate="159"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA04-RM-closure3">
                            <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra551"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1671"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1461"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1441"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="647" YCoordinate="254"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS04b-Assign1" Name="SYS04b - Assign to technician">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);

currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
AssegnatarioID = DstUser.getId();
UtilizzatoreID = FinalUser.getId();
ExecAction=cmdb.selectLookupByCode("AssetMgt - ExecAction","EXE");

// update EAM

if(computerEAMlist != null &amp;&amp; computerEAMlist!= "") {

	String[] parts = computerEAMlist.split(rowSeparator);
	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);

		eam = "";
		computerID = "";

		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length&gt;1) {		
				String name = keyValue[0];
				String value = keyValue[1];
				logger.warn("name is {}",name);
				logger.warn("string value is {}",value);
				if(name.equalsIgnoreCase("EAMicrosoft")) 
					eam = value;
				if(name.equalsIgnoreCase("Computer")) 
					computerID = value;
			}
		}
	
		try {
			if(isValidValue(eam) &amp;&amp; StringUtils.isNumeric(eam)) { 
				lkpEam = cmdb.selectLookupById(Long.parseLong(eam));
				if(lkpEam!=null) {
					refComputer = cmdb.referenceTypeFrom(computerID);
					cdComputer = cmdb.cardDescriptorFrom(refComputer);
					cmdb.existingCard(cdComputer.getClassName(),cdComputer.getId())
						.with("EAMicrosoft",lkpEam)
						.update();
				} else
					logger.warn("Eam not found for ID {}",eam);
			} else
				logger.warn("Eam empty");
		} catch(e) {
			logger.warn("Update of card {} with EAM {} failed",computerID,eam);
		}
	}
} else
	logger.warn("Eam computer list empty");</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="287" YCoordinate="22"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS04a-Initialize1" Name="SYS04a - Initialize">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">// create relations to be used in widgets

for(refSW : selectedSoftware){

	cmdb.newRelation("AssetMgtSWCatalogue") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("SWCatalogue",  refSW.getId()) //
			.create();
}

for(refHW : selectedHardware){
	if(Hardware==null || Hardware.getId()&lt;=0) {
		Hardware = refHW;
		cdHardware = cmdb.cardFrom(Hardware);
		EDPNumber = cdHardware.get("EDPNumber");	
	}

	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","-")
		.execute();

}

if(SameUser) {
	FinalUser = DstUser;
}

MissingAcceptance = true;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="168" YCoordinate="22"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act222">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="908" YCoordinate="269"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA04-SetClosureData1" Name="BA04 - Set closure data">
                            <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="782" YCoordinate="256"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS04-UpdateAssets1" Name="SYS04 - Update assets">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">inuseId = cmdb.selectLookupByCode("CI - State","InUse").getId();

for(refHW : selectedHardware){
	
	cdHardware = cmdb.cardDescriptorFrom(refHW);
	Hardware = refHW;
	hardwareCard = cmdb.existingCard("Hardware",refHW.getId())
		.with("State",inuseId)
		.with("Busy",false)
		.with("Assignee",DstUser)
		.with("Employment",Employment)
		.with("Destination",Destination)
		.with("Room",DstRoom);

	if(FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) 
		hardwareCard.with("FinalUser",FinalUser);
	
	roomCard = cmdb.existingCard("Room",DstRoom.getId()).fetch();
	if(roomCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",roomCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(roomCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",roomCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}
	
	hardwareCard.update();

	// create assignments
	startDate = Calendar.getInstance().getTime();
	assType = cmdb.selectLookupByCode("Assignment - Type","01");
	cmdb.newCard("Assignment")
		.with("Asset",Hardware)
		.with("Employee",DstUser)
		.with("Type",assType)
		.with("StartingDate",startDate)
		.create();

	if(FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) {

		assType = cmdb.selectLookupByCode("Assignment - Type","02");
		cmdb.newCard("Assignment")
			.with("Asset",Hardware)
			.with("Employee",FinalUser)
			.with("Type",assType)
			.with("StartingDate",startDate)
			.create();
	
	}

	// if hardware is a Computer 
	// create relations with software
	if(cdHardware.getClassName().equalsIgnoreCase("Client")
		|| cdHardware.getClassName().equalsIgnoreCase("VDIClient")
		|| cdHardware.getClassName().equalsIgnoreCase("PhysicalServer")
		|| cdHardware.getClassName().equalsIgnoreCase("VirtualServer")) {
		
		for(refSW : selectedSoftware) {
			cdSoftware = cmdb.cardFrom(refSW);
			swInstanceType = cdSoftware.get("Type").getCode();		
			cmdb.newCard(swInstanceType)
				.with("Hardware", refHW.getId())
				.with("Product", refSW.getId())
				.create();
		}
	}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="645" YCoordinate="16"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act33">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Exclusive">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra189"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra190"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra191"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="532" YCoordinate="168"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BLC04-Reset">
                            <xpdl:BlockActivity ActivitySetId="ASE-Reset"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool8_lan6" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="351" YCoordinate="61"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="BA-CheckEAMicrosoft3" Id="Process_assetmgt_tra1861" To="SYS04b-Assign1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-Policy1" Id="Process_assetmgt_tra1771" To="AM04c-Confirmation1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure3" Id="Process_assetmgt_tra1461" To="BA04-SetClosureData1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure3" Id="Process_assetmgt_tra1671" To="AM04-Assignment1">
                            <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="666" YCoordinate="269"/>
                                    <xpdl:Coordinates XCoordinate="666" YCoordinate="50"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM04-Assignment1" Id="Process_assetmgt_tra511" To="SYS04a-Initialize1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure3" Id="Process_assetmgt_tra551" To="SYS04-UpdateAssets1">
                            <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure3" Id="Process_assetmgt_tra1441" To="AM04c-Confirmation1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="749" YCoordinate="234"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS04-UpdateAssets1" Id="Process_assetmgt_tra1231" To="BA04-SetClosureData1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS04b-Assign1" Id="Process_assetmgt_tra1162" To="AM04c-Execution1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS04a-Initialize1" Id="Process_assetmgt_tra1152" To="AM04b-Check1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM04c-Confirmation1" Id="Process_assetmgt_tra1142" To="BA04-RM-closure3">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM04b-Check1" Id="Process_assetmgt_tra1132" To="BA-CheckEAMicrosoft3">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-SetClosureData1" Id="Process_assetmgt_tra562" To="Process_assetmgt_act222">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act29" Id="Process_assetmgt_tra178" To="AM04-Assignment1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM04-Assignment1" Id="Process_assetmgt_tra179" To="Process_assetmgt_act222">
                            <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="957" YCoordinate="41"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM04c-Execution1" Id="Process_assetmgt_tra188" To="Process_assetmgt_act33">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act33" Id="Process_assetmgt_tra189" To="AM04b-Check1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="585" YCoordinate="139"/>
                                    <xpdl:Coordinates XCoordinate="382" YCoordinate="137"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act33" Id="Process_assetmgt_tra190" To="BLC04-Reset">
                            <xpdl:Condition Type="CONDITION">"RET".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="592" YCoordinate="99"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act33" Id="Process_assetmgt_tra191" To="BA04-Policy1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BLC04-Reset" Id="Process_assetmgt_tra79" To="AM04-Assignment1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="356" YCoordinate="97"/>
                                    <xpdl:Coordinates XCoordinate="356" YCoordinate="58"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="ASE-Replacement">
                    <xpdl:Activities>
                        <xpdl:Activity Id="BA06-Policy2">
                            <xpdl:BlockActivity ActivitySetId="BA-Acceptance"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="476" YCoordinate="215"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA-CheckEAMicrosoft21">
                            <xpdl:BlockActivity ActivitySetId="ASE-CheckEMicrosoft"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="252" YCoordinate="208"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM06d-Confirmation1" Name="AM06d - Confirmation">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section1"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstStatus"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PolicyAction"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to assign&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='-'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to withdraw&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='+'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Selected software to install&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5138&quot;&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;PerifericaRitirata=EDPNumberWithdrawal"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5140&quot;&#13;&#10;ButtonLabel=&quot;Stampa ricevuta per l'utente&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="609" YCoordinate="120"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM06c-Execution1" Name="AM06c - Execution">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section1"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstStatus"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="ExecAction"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to assign&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='-'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to withdraw&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='+'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Selected software to install&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5138&quot;&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;PerifericaRitirata=EDPNumberWithdrawal"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5140&quot;&#13;&#10;ButtonLabel=&quot;Stampa ricevuta per l'utente&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="373" YCoordinate="117"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM06b-Check1" Name="AM06b - Check">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section1"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstStatus"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="MissingAcceptance"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to assign&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='-'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Selected hardware to withdraw&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A' and &quot;Direction&quot;=(select &quot;Id&quot; from &quot;LookUp&quot; where &quot;Status&quot;='A' and &quot;Type&quot;='AssetMgtCI - Direction' and &quot;Code&quot;='+'))/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Selected software to install&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:DstUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;User data&quot;"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Update EAM field&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formEAMModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_piaggio_am_eamlist&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;true&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;true&quot;&#13;&#10;ExportDisabled=&quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;computerEAMlist"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="249" YCoordinate="117"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS06a-Initialize1" Name="SYS06a - Initialize">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">// create relations to be used in widgets
for(refHW : selectedHardwareToWithdraw){

	cdHardware = cmdb.cardFrom(refHW);
	EDPNumberWithdrawal = cdHardware.get("EDPNumber");

	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("CI",  refHW.getId()) //
			.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","+")
		.execute();
}

for(refHW : selectedHardwareToAssign){
	Hardware = refHW;
	cdHardware = cmdb.cardFrom(Hardware);
	EDPNumber = cdHardware.get("EDPNumber");

	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","-")
		.execute();
}

for(refSW : selectedSoftware){

	cmdb.newRelation("AssetMgtSWCatalogue") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("SWCatalogue",  refSW.getId()) //
			.create();
}


if(SameUser) {
	FinalUser = DstUser;
}

MissingAcceptance = true;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="115" YCoordinate="22"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA06-RM-closure1">
                            <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1251"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1471"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra115"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra125"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="613" YCoordinate="219"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS06b-Assign" Name="SYS06b - Assign to technician">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);
	
currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
AssegnatarioID = DstUser.getId();
UtilizzatoreID = FinalUser.getId();
ExecAction=cmdb.selectLookupByCode("AssetMgt - ExecAction","EXE");
	
// update EAM

if(computerEAMlist != null &amp;&amp; computerEAMlist!= "") {

	String[] parts = computerEAMlist.split(rowSeparator);
	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);

		eam = "";
		computerID = "";

		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length&gt;1) {		
				String name = keyValue[0];
				String value = keyValue[1];
				logger.warn("name is {}",name);
				logger.warn("string value is {}",value);
				if(name.equalsIgnoreCase("EAMicrosoft")) 
					eam = value;
				if(name.equalsIgnoreCase("Computer")) 
					computerID = value;
			}
		}
	
		try {
			if(isValidValue(eam) &amp;&amp; StringUtils.isNumeric(eam)) { 
				lkpEam = cmdb.selectLookupById(Long.parseLong(eam));
				if(lkpEam!=null) {
					refComputer = cmdb.referenceTypeFrom(computerID);
					cdComputer = cmdb.cardDescriptorFrom(refComputer);
					cmdb.existingCard(cdComputer.getClassName(),cdComputer.getId())
						.with("EAMicrosoft",lkpEam)
						.update();
				} else
					logger.warn("Eam not found for ID {}",eam);
			} else
				logger.warn("Eam empty");
		} catch(e) {
			logger.warn("Update of card {} with EAM {} failed",computerID,eam);
		}
	}
} else
	logger.warn("Eam computer list empty");

cdFinalUser = cmdb.cardDescriptorFrom(FinalUser);
if("InternalEmployee".equalsIgnoreCase(cdFinalUser.getClassName())) {
	varRepAssegnazione = varRepAssegnazioneInt;
	varRepPolicy = varRepPolicyInt;
} else {
	varRepAssegnazione = varRepAssegnazioneExt;
	varRepPolicy = varRepPolicyExt;
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="255" YCoordinate="25"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act231">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="888" YCoordinate="233"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA06-SetClosureData2" Name="BA06 - Set closure data">
                            <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="772" YCoordinate="217"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS06b-UpdateAssets" Name="SYS06d - Update assets">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);
dstStatusCI = cmdb.selectLookupByCode("CI - State",DstStatus.getCode());
if(dstStatusCI == null || !dstStatusCI.checkValidity()){
	logger.warn("Matching lookup with type 'CI - State' not found for destination state " + DstStatus);
}

for(refHW : selectedHardwareToWithdraw){
	
	// update assignment
	endingDate = Calendar.getInstance().getTime();
	cmdb.callFunction("wf_assetmgt_remove_assignment")
		.with("hardwareid",refHW.getId())
		.with("userid",_CurrentUser.getId())
		.with("endingdate",endingDate)
		.execute();
	cdHardware = cmdb.cardDescriptorFrom(refHW);
	className = cdHardware.getClassName();
	hardwareCard = cmdb.existingCard(className,refHW.getId())
		.with("State",dstStatusCI)
		.with("Busy",false)
		.with("Assignee",null)
		.with("FinalUser",null)
		.with("Employment",Employment2)
		.with("Destination",Destination2)
		.with("Room",DstWrhouse);
	roomCard = cmdb.existingCard("Room",DstWrhouse.getId()).fetch();
	if(roomCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",roomCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(roomCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",roomCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}
	
	// if computer then clear the EA Microsoft field
	isComputer = checkComputer(className);
	if(isComputer)
		hardwareCard.with("EAMicrosoft","");
	
	hardwareCard.update();
}

inuseId = cmdb.selectLookupByCode("CI - State","InUse").getId();

for(refHW : selectedHardwareToAssign){
	
	// update assignment
	endingDate = Calendar.getInstance().getTime();
	cmdb.callFunction("wf_assetmgt_remove_assignment")
		.with("hardwareid",refHW.getId())
		.with("userid",_CurrentUser.getId())
		.with("endingdate",endingDate)
		.execute();
	hardwareCard = cmdb.existingCard("Hardware",refHW.getId())
		.with("State",inuseId)
		.with("Busy",false)
		.with("Assignee",DstUser)
		.with("Employment",Employment)
		.with("Destination",Destination)
		.with("Room",DstRoom);

	if(FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) 
		hardwareCard.with("FinalUser",FinalUser);

	roomCard = cmdb.existingCard("Room",DstRoom.getId()).fetch();
	if(roomCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",roomCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(roomCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",roomCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}
	hardwareCard.update();

	// create assignments
	startDate = Calendar.getInstance().getTime();
	assType = cmdb.selectLookupByCode("Assignment - Type","01");
	cmdb.newCard("Assignment")
		.with("Asset",refHW)
		.with("Employee",DstUser)
		.with("Type",assType)
		.with("StartingDate",startDate)
		.create();

	if(FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) {

		assType = cmdb.selectLookupByCode("Assignment - Type","02");
		cmdb.newCard("Assignment")
			.with("Asset",refHW)
			.with("Employee",FinalUser)
			.with("Type",assType)
			.with("StartingDate",startDate)
			.create();
	}

	cdHardware = cmdb.cardDescriptorFrom(refHW);

	// if hardware is a Computer 
	// create relations with software
	if(cdHardware.getClassName().equalsIgnoreCase("Client")
		|| cdHardware.getClassName().equalsIgnoreCase("VDIClient")
		|| cdHardware.getClassName().equalsIgnoreCase("PhysicalServer")
		|| cdHardware.getClassName().equalsIgnoreCase("VirtualServer")) {
		
		for(refSW : selectedSoftware) {
			cdSoftware = cmdb.cardFrom(refSW);
			swInstanceType = cdSoftware.get("Type").getCode();		
			cmdb.newCard(swInstanceType)
				.with("Hardware", refHW.getId())
				.with("Product", refSW.getId())
				.create();
		}
	}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan2" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="617" YCoordinate="32"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM06-Replacement1" Name="AM06 - Replacement">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra55"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra651"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section1"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Section2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstStatus"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstWrhouse"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Employment2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Destination2"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to assign&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on h.&quot;State&quot; = l.&quot;Id&quot; and l.&quot;Status&quot; = 'A' and l.&quot;Code&quot; = 'Available' where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and h.&quot;Status&quot; = 'A' and h.&quot;Room&quot;::text='{client:OrigWrhouse.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardwareToAssign"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10;ButtonLabel=&quot;Software to install&quot;&#13;&#10;Filter=&quot;from SWCatalogue where Id in (/( select &quot;Id&quot; from &quot;SWCatalogue&quot; where &quot;Status&quot;='A' and &quot;Type&quot; is not null )/)&quot;&#13;&#10;selectedSoftware"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to withdraw&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on h.&quot;State&quot; = l.&quot;Id&quot; and l.&quot;Status&quot; = 'A' and l.&quot;Code&quot; = 'InUse' where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and h.&quot;Status&quot; = 'A' and h.&quot;Assignee&quot;::text='{client:DstUser.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardwareToWithdraw"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware currently assigned to the user&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; where &quot;Assignee&quot;::text = '{client:DstUser.Id}')/)&quot;&#13;&#10;NoSelect=1"/>
                                <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:DstUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;User data&quot;"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM06-Replacement-ToUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="117" YCoordinate="12"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act40">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Exclusive">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra113"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra56"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra114"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="498" YCoordinate="127"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act41">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="64" YCoordinate="26"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BLC06-Reset">
                            <xpdl:BlockActivity ActivitySetId="ASE-Reset"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool9_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="319" YCoordinate="41"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="BA-CheckEAMicrosoft21" Id="Process_assetmgt_tra1871" To="SYS06b-Assign">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM06d-Confirmation1" Id="Process_assetmgt_tra1821" To="BA06-RM-closure1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-Policy2" Id="Process_assetmgt_tra1811" To="AM06d-Confirmation1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-RM-closure1" Id="Process_assetmgt_tra1471" To="BA06-SetClosureData2">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM06-Replacement1" Id="Process_assetmgt_tra651" To="SYS06a-Initialize1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS06a-Initialize1" Id="Process_assetmgt_tra661" To="AM06b-Check1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-RM-closure1" Id="Process_assetmgt_tra1251" To="SYS06b-UpdateAssets">
                            <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS06b-UpdateAssets" Id="Process_assetmgt_tra691" To="BA06-SetClosureData2">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM06c-Execution1" Id="Process_assetmgt_tra941" To="Process_assetmgt_act40">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS06b-Assign" Id="Process_assetmgt_tra931" To="AM06c-Execution1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM06b-Check1" Id="Process_assetmgt_tra711" To="BA-CheckEAMicrosoft21">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-SetClosureData2" Id="Process_assetmgt_tra701" To="Process_assetmgt_act231">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM06-Replacement1" Id="Process_assetmgt_tra55" To="Process_assetmgt_act231">
                            <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="943" YCoordinate="17"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act40" Id="Process_assetmgt_tra56" To="AM06b-Check1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="549" YCoordinate="34"/>
                                    <xpdl:Coordinates XCoordinate="331" YCoordinate="33"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act40" Id="Process_assetmgt_tra113" To="BLC06-Reset">
                            <xpdl:Condition Type="CONDITION">"RET".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="556" YCoordinate="50"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act40" Id="Process_assetmgt_tra114" To="BA06-Policy2">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-RM-closure1" Id="Process_assetmgt_tra115" To="AM06d-Confirmation1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="716" YCoordinate="199"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act41" Id="Process_assetmgt_tra116" To="AM06-Replacement1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BLC06-Reset" Id="Process_assetmgt_tra94" To="AM06-Replacement1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-RM-closure1" Id="Process_assetmgt_tra125" To="AM06-Replacement1">
                            <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="614" YCoordinate="248"/>
                                    <xpdl:Coordinates XCoordinate="614" YCoordinate="24"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="ASE-Transer">
                    <xpdl:Activities>
                        <xpdl:Activity Id="BA04-RM-closure11">
                            <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1691"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra1491"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra781"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra127"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="650" YCoordinate="275"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA06-Policy11">
                            <xpdl:BlockActivity ActivitySetId="BA-Acceptance"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="517" YCoordinate="272"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA-CheckEAMicrosoft12">
                            <xpdl:BlockActivity ActivitySetId="ASE-CheckEMicrosoft"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="242" YCoordinate="275"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM07c-Execution11" Name="AM07c - Execution">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="ExecAction"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5138&quot;&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="381" YCoordinate="148"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM07b-Check1" Name="AM07b - Check">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="MissingAcceptance"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                                <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Update EAM field&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formEAMModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_piaggio_am_eamlist&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;true&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;true&quot;&#13;&#10;ExportDisabled=&quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;computerEAMlist"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="242" YCoordinate="149"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS07a-Initialize1" Name="SYS07a - Initialize">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">// create relations to be used in widgets

for(refHW : selectedHardware){
	if(Hardware==null || Hardware.getId()&lt;=0) 
		Hardware = refHW;
	cdHardware = cmdb.cardFrom(Hardware);
	EDPNumber = cdHardware.get("EDPNumber");	

	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","=")
		.execute();
}

if(SameUser) {
	FinalUser = DstUser;
}

MissingAcceptance = true;</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="131" YCoordinate="23"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS07b-Assign1" Name="SYS07b - Assign to technician">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);
	
currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
AssegnatarioID = DstUser.getId();
UtilizzatoreID = FinalUser.getId();
ExecAction=cmdb.selectLookupByCode("AssetMgt - ExecAction","EXE");
	
// update EAM

if(computerEAMlist != null &amp;&amp; computerEAMlist!= "") {

	String[] parts = computerEAMlist.split(rowSeparator);
	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);

		eam = "";
		computerID = "";

		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length&gt;1) {		
				String name = keyValue[0];
				String value = keyValue[1];
				logger.warn("name is {}",name);
				logger.warn("string value is {}",value);
				if(name.equalsIgnoreCase("EAMicrosoft")) 
					eam = value;
				if(name.equalsIgnoreCase("Computer")) 
					computerID = value;
			}
		}
	
		try {
			if(isValidValue(eam) &amp;&amp; StringUtils.isNumeric(eam)) { 
				lkpEam = cmdb.selectLookupById(Long.parseLong(eam));
				if(lkpEam!=null) {
					refComputer = cmdb.referenceTypeFrom(computerID);
					cdComputer = cmdb.cardDescriptorFrom(refComputer);
					cmdb.existingCard(cdComputer.getClassName(),cdComputer.getId())
						.with("EAMicrosoft",lkpEam)
						.update();
				} else
					logger.warn("Eam not found for ID {}",eam);
			} else
				logger.warn("Eam empty");
		} catch(e) {
			logger.warn("Update of card {} with EAM {} failed",computerID,eam);
		}
	}
} else
	logger.warn("Eam computer list empty");</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="244" YCoordinate="31"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM07c-Confirmation1" Name="AM07c - Confirmation">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="PolicyAction"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                                <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5138&quot;&#13;&#10;ButtonLabel=&quot;Stampa Scheda Assegnazione&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="645" YCoordinate="147"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act251">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="927" YCoordinate="286"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BA07-SetClosureData1" Name="BA07 - Set closure data">
                            <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="786" YCoordinate="273"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS07-UpdateAssets1" Name="SYS07 - Update assets">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">inuseId = cmdb.selectLookupByCode("CI - State","InUse").getId();

for(refHW : selectedHardware){
	
	// remove assignments
	endingDate = Calendar.getInstance().getTime();
	cmdb.callFunction("wf_assetmgt_remove_assignment")
		.with("hardwareid",refHW.getId())
		.with("userid",_CurrentUser.getId())
		.with("endingdate",endingDate)
		.execute();

	hardwareCard = cmdb.existingCard("Hardware",refHW.getId())
		.with("State",inuseId)
		.with("Busy",false)
		.with("Assignee",DstUser)
		.with("Employment",Employment)
		.with("Destination",Destination)
		.with("Room",DstRoom);

	if(!IgnoreFinalUser &amp;&amp; FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) 
		hardwareCard.with("FinalUser",FinalUser);


	if(DstRoom!=null &amp;&amp; DstRoom.getId()&gt;0) {
		roomCard = cmdb.existingCard("Room",DstRoom.getId()).fetch();
		if(roomCard.get("Floor").checkValidity()){
			floorCard = cmdb.existingCard("Floor",roomCard.get("Floor").getId()) //
					.fetch();
			hardwareCard.with("Floor",floorCard.getId());
		}
		if(roomCard.get("Building").checkValidity()){
			buildingCard = cmdb.existingCard("Building",roomCard.get("Building").getId()) //
					.fetch();
			hardwareCard.with("Building",buildingCard.getId());
		}
	}

	hardwareCard.update();

	// create assignments
	startDate = Calendar.getInstance().getTime();
	assType = cmdb.selectLookupByCode("Assignment - Type","01");
	cmdb.newCard("Assignment")
		.with("Asset",refHW)
		.with("Employee",DstUser)
		.with("Type",assType)
		.with("StartingDate",startDate)
		.create();

	if(!IgnoreFinalUser &amp;&amp; FinalUser!=null &amp;&amp; FinalUser.getId()&gt;0) {

		assType = cmdb.selectLookupByCode("Assignment - Type","02");
		cmdb.newCard("Assignment")
			.with("Asset",refHW)
			.with("Employee",FinalUser)
			.with("Type",assType)
			.with("StartingDate",startDate)
			.create();
	}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="650" YCoordinate="38"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="AM07-TransferBtwUsers1" Name="AM07 - Transfer between users">
                            <xpdl:Implementation>
                                <xpdl:No/>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer>currentGroup</xpdl:Performer>
                            </xpdl:Performers>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Join Type="Exclusive"/>
                                    <xpdl:Split Type="Parallel">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra70"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra761"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:ExtendedAttributes>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="DstRoom"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Employment"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Destination"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Policy"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="IgnoreFinalUser"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                                <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to move&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and h.&quot;Status&quot; = 'A' and h.&quot;Assignee&quot;::text='{client:OrigUser.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardware"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware assigned to orig. user&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; where &quot;Assignee&quot;::text = '{client:OrigUser.Id}')/)&quot;&#13;&#10;NoSelect=1"/>
                                <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware assigned to dest. user&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; where &quot;Assignee&quot;::text = '{client:DstUser.Id}')/)&quot;&#13;&#10;NoSelect=1"/>
                                <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:OrigUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;Orig. user data&quot;"/>
                                <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:DstUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;Dest. user data&quot;"/>
                                <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                                <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM07-Transfer-ToDstUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;&#13;&#10;Template = &quot;AM07-Transfer-ToOrigUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                            </xpdl:ExtendedAttributes>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="130" YCoordinate="43"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act43">
                            <xpdl:Route GatewayType="Exclusive"/>
                            <xpdl:TransitionRestrictions>
                                <xpdl:TransitionRestriction>
                                    <xpdl:Split Type="Exclusive">
                                        <xpdl:TransitionRefs>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra66"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra69"/>
                                            <xpdl:TransitionRef Id="Process_assetmgt_tra71"/>
                                        </xpdl:TransitionRefs>
                                    </xpdl:Split>
                                </xpdl:TransitionRestriction>
                            </xpdl:TransitionRestrictions>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="43">
                                    <xpdl:Coordinates XCoordinate="542" YCoordinate="158"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act44">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="72" YCoordinate="58"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="BLC06-Reset1">
                            <xpdl:BlockActivity ActivitySetId="ASE-Reset"/>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool10_lan7" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="358" YCoordinate="75"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="BA-CheckEAMicrosoft12" Id="Process_assetmgt_tra771" To="SYS07b-Assign1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM07-TransferBtwUsers1" Id="Process_assetmgt_tra761" To="SYS07a-Initialize1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA06-Policy11" Id="Process_assetmgt_tra1841" To="AM07c-Confirmation1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM07c-Execution11" Id="Process_assetmgt_tra1831" To="Process_assetmgt_act43">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure11" Id="Process_assetmgt_tra1491" To="BA07-SetClosureData1">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS07-UpdateAssets1" Id="Process_assetmgt_tra1711" To="BA07-SetClosureData1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure11" Id="Process_assetmgt_tra1691" To="SYS07-UpdateAssets1">
                            <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure11" Id="Process_assetmgt_tra781" To="AM07c-Confirmation1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="758" YCoordinate="240"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS07a-Initialize1" Id="Process_assetmgt_tra11721" To="AM07b-Check1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM07b-Check1" Id="Process_assetmgt_tra11821" To="BA-CheckEAMicrosoft12">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS07b-Assign1" Id="Process_assetmgt_tra11921" To="AM07c-Execution11">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM07c-Confirmation1" Id="Process_assetmgt_tra1271" To="BA04-RM-closure11">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA07-SetClosureData1" Id="Process_assetmgt_tra791" To="Process_assetmgt_act251">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act43" Id="Process_assetmgt_tra66" To="AM07b-Check1">
                            <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="599" YCoordinate="66"/>
                                    <xpdl:Coordinates XCoordinate="331" YCoordinate="67"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act43" Id="Process_assetmgt_tra69" To="BLC06-Reset1">
                            <xpdl:Condition Type="CONDITION">"RET".equalsIgnoreCase(ExecAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="592" YCoordinate="105"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="AM07-TransferBtwUsers1" Id="Process_assetmgt_tra70" To="Process_assetmgt_act251">
                            <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="971" YCoordinate="52"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act43" Id="Process_assetmgt_tra71" To="BA06-Policy11">
                            <xpdl:Condition Type="OTHERWISE"/>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="Process_assetmgt_act44" Id="Process_assetmgt_tra93" To="AM07-TransferBtwUsers1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BLC06-Reset1" Id="Process_assetmgt_tra123" To="AM07-TransferBtwUsers1">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="BA04-RM-closure11" Id="Process_assetmgt_tra127" To="AM07-TransferBtwUsers1">
                            <xpdl:Condition Type="CONDITION">"bac".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                                    <xpdl:Coordinates XCoordinate="655" YCoordinate="310"/>
                                    <xpdl:Coordinates XCoordinate="657" YCoordinate="59"/>
                                </xpdl:ConnectorGraphicsInfo>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
                <xpdl:ActivitySet Id="ASE-Reset">
                    <xpdl:Activities>
                        <xpdl:Activity Id="Process_assetmgt_act45">
                            <xpdl:Event>
                                <xpdl:StartEvent Trigger="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool11_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="85" YCoordinate="58"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="Process_assetmgt_act46">
                            <xpdl:Event>
                                <xpdl:EndEvent Result="None"/>
                            </xpdl:Event>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool11_lan1" ToolId="JaWE" Width="31">
                                    <xpdl:Coordinates XCoordinate="362" YCoordinate="61"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                        <xpdl:Activity Id="SYS-Reset">
                            <xpdl:Implementation>
                                <xpdl:Task>
                                    <xpdl:TaskScript>
                                        <xpdl:Script ScriptType="text/java">eval(functionLibrary);
currentGroup ="ServiceRequestManager";
// clear relations
clearRelationList("AssetMgtCI");
clearRelationList("AssetMgtSWCatalogue");
Hardware = null;
// update flag
if(selectedHardware!=null) {
	for(refHW : selectedHardware){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}
if(selectedHardwareToAssign!=null) {
	for(refHW : selectedHardwareToAssign){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}
if(selectedHardwareToWithdraw!=null) {
	for(refHW : selectedHardwareToWithdraw){
		cmdb.existingCard("Hardware",refHW.getId())
			.with("Busy",false)
			.update();
	}
}</xpdl:Script>
                                    </xpdl:TaskScript>
                                </xpdl:Task>
                            </xpdl:Implementation>
                            <xpdl:Performers>
                                <xpdl:Performer/>
                            </xpdl:Performers>
                            <xpdl:NodeGraphicsInfos>
                                <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool11_lan1" ToolId="JaWE" Width="90">
                                    <xpdl:Coordinates XCoordinate="191" YCoordinate="46"/>
                                </xpdl:NodeGraphicsInfo>
                            </xpdl:NodeGraphicsInfos>
                        </xpdl:Activity>
                    </xpdl:Activities>
                    <xpdl:Transitions>
                        <xpdl:Transition From="Process_assetmgt_act45" Id="Process_assetmgt_tra77" To="SYS-Reset">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                        <xpdl:Transition From="SYS-Reset" Id="Process_assetmgt_tra78" To="Process_assetmgt_act46">
                            <xpdl:ConnectorGraphicsInfos>
                                <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                            </xpdl:ConnectorGraphicsInfos>
                        </xpdl:Transition>
                    </xpdl:Transitions>
                </xpdl:ActivitySet>
            </xpdl:ActivitySets>
            <xpdl:Activities>
                <xpdl:Activity Id="Process_assetmgt_act1">
                    <xpdl:Event>
                        <xpdl:StartEvent Trigger="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="102,204,51" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="63" YCoordinate="341"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act2">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1710" YCoordinate="91"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM01-ChooseType" Name="AM01 - Choose type">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>"{dbtmpl:AssetMgt-Performers}"</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Type"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="adminStart" Value="true"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="126" YCoordinate="331"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM02a-GRHeader" Name="AM02a - Goods receipt (order header)">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Supplier"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Order"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="GRHeaderAction"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="420" YCoordinate="66"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM02b1-GROrderRows" Name="AM02b1 - Goods receipt (order rows)">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Supplier"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Order"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel = &quot;Edit order rows&quot;&#13;&#10;ModelType = &quot;Class&quot;&#13;&#10;    ClassModel = &quot;PurchOrderRowTmpl&quot;&#13;&#10;    ClassAttributes = &quot;&quot;&#13;&#10;Layout = &quot;grid&quot;&#13;&#10;DataType = &quot;function&quot;&#13;&#10;&#9;FunctionData = &quot;wf_assetmgt_orderrows&quot;&#13;&#10;orderid=&quot;{server:Order.Id}&quot;&#13;&#10;ReadOnly = &quot;false&quot;&#13;&#10;Required = &quot;true&quot;&#13;&#10;AddDisabled = &quot;true&quot;&#13;&#10;ImportDisabled = &quot;true&quot;&#13;&#10;ExportDisabled = &quot;true&quot;&#13;&#10;ModifyDisabled = &quot;false&quot;&#13;&#10;CloneDisabled = &quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;RefreshBehaviour = &quot;everyTime&quot;&#13;&#10;orderRows"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="727" YCoordinate="73"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM02b2-GRConfirm" Name="AM02b2 - Goods receipt (confirm)">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Confirm"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1148" YCoordinate="83"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS01-SetOpeningData" Name="SYS01 - Set opening data">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">import org.joda.time.format.DateTimeFormatter;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.DateTime;
CreationTimestamp = Calendar.getInstance().getTime();
spResultSet = cmdb.callFunction("wf_assetmgt_number").execute();
Number = spResultSet.get("number");
ProcessStatus = cmdb.selectLookupByCode("ITProc - ProcessStatus","Execution");
currentGroup ="ServiceRequestManager";
SendEmail = false;

dateTime = new DateTime(CreationTimestamp);
DateTimeFormatter fmt = DateTimeFormat.forPattern("dd/MM/yyyy HH:mm:ss");
Description = Number + " - " + Type.getCode() +  " [" + fmt.print(dateTime) + "]";

// default Destination and employment

switch(Type.getCode()) {
	case "Assignment":
		Employment = cmdb.selectLookupByCode("HW - Employment","Office");
		Destination = cmdb.selectLookupByCode("HW - Destination","Standard");
		break;
	case "TransferBtwUsers":
		Employment = cmdb.selectLookupByCode("HW - Employment","Office");
		Destination = cmdb.selectLookupByCode("HW - Destination","Standard");
		break;
	case "Withdrawal":
		//Message = cmdb.selectLookupByCode("ITProc - Message","AM-WithdrawalCheckEDP");
		Employment = cmdb.selectLookupByCode("HW - Employment","InSosta");
		Destination = cmdb.selectLookupByCode("HW - Destination","Riassegnabile");
		break;
	case "MoveUser":
		Employment = cmdb.selectLookupByCode("HW - Employment","Office");
		Destination = cmdb.selectLookupByCode("HW - Destination","Standard");
		break;
	case "Disposal":
		Employment = cmdb.selectLookupByCode("HW - Employment","InSosta");
		Destination = cmdb.selectLookupByCode("HW - Destination","Disinvestito");
		break;
	case "Replacement":
		Employment = cmdb.selectLookupByCode("HW - Employment","Office");
		Destination = cmdb.selectLookupByCode("HW - Destination","Standard");
		Employment2 = cmdb.selectLookupByCode("HW - Employment","InSosta");
		Destination2 = cmdb.selectLookupByCode("HW - Destination","Riassegnabile");
		Section1 = cmdb.selectLookupByCode("ITProc - Message","AM-Section1");
		Section2 = cmdb.selectLookupByCode("ITProc - Message","AM-Section2");
		break;
}

requestToCancel=false;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="245" YCoordinate="332"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act3">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra34"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra33"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra3"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra50"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra57"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra64"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra74"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra81"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra88"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra102"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra122"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra73"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="367" YCoordinate="344"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02c.4-SetClosureData" Name="SYS02c.4 - Set closure data">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">ClosureTimestamp = Calendar.getInstance().getTime();
ProcessStatus = cmdb.selectLookupByCode("ITProc - ProcessStatus","Closed");
Confirm = null;
OrderRow = null;
GRAssetsAction = null;
GRHeaderAction = null;
Message = null;
OrderRowBrand = null;
OrderRowCMDBClass = null;
OrderRowModel = null;
OrderRowQty = null;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1415" YCoordinate="79"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act5">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra6"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra8"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="532" YCoordinate="77"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02a.1-LoadMessage" Name="SYS02a.1 - Load message">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">Message = cmdb.selectLookupByCode("ITProc - Message","AM-OrderRowsInstructions");

orderRows = null;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="600" YCoordinate="71"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02b.1-CheckConfirmRequired" Name="SYS02b.1 - Check confirm required">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">Message = null;
String[] parts = orderRows.split("\n");
for(String part : parts){
	if(part.contains("EarlyClosure=true")){
		Message = cmdb.selectLookupByCode("ITProc - Message","AM-ConfirmEarlyClosure");
		break;
	}
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="922" YCoordinate="79"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act6">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra15"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra11"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1040" YCoordinate="90"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act4">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra16"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra17"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1303" YCoordinate="93"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02b.2-UpdateOrderRows" Name="SYS02b.2 - Update order rows">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
Message = null;
Confirm = null;
String[] parts = orderRows.split(rowSeparator);
logger.warn("-----" + orderRows +  "----");
for (String card : parts) {
	if(card == null || card.isEmpty()){
		continue;
	}
	orderRowCard = null;
	int deliveryQuantity = 0;
	boolean earlyClosure = false;
	logger.warn("build card {}",card);
	String[] attributes = card.split(attrSeparator);
	for(String attribute : attributes) {
		logger.warn("deserialize attribute {}",attribute);
		String[] keyValue = attribute.split(keyvalueSeparator); 
		if(keyValue.length &lt; 2){
			continue;
		}
		String name = keyValue[0];
		String value = keyValue[1];
		logger.warn("name is {}",name);
		logger.warn("string value is {}",value);
		if(name.equals("Code")){
			orderRowCard = cmdb.queryClass("PurchaseOrderRow") //
				.with("Order",Order.getId()) //
				.with("Code",value) //
				.fetch()
				.get(0);	
			logger.warn("retrived row with id " + orderRowCard.getId());
		} else if(name.equals("DeliveryQuantity")) {
			deliveryQuantity = Integer.parseInt(value);
			logger.warn("current delivery quantity: " + deliveryQuantity);
		} else if(name.equals("EarlyClosure")) {
			earlyClosure = Boolean.parseBoolean(value);
		}
	}
	cmdb.existingCard("PurchaseOrderRow",orderRowCard.getId()) //
		.with("DeliveryQuantity",deliveryQuantity) //
		.with("EarlyClosure",earlyClosure)			
		.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1018" YCoordinate="183"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02b.3-StartIteration" Name="SYS02b.3 - Start iteration">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
exit = true;
orderRowCardList = cmdb.queryClass("PurchaseOrderRow")
					.with("Order",Order.getId())
					.with("EarlyClosure",false)
					.fetch();
stringBuilder = new StringBuilder("");
for(orderRowCard : orderRowCardList){
	if(orderRowCard.get("DeliveryQuantity") &gt; 0 ){
		stringBuilder.append(orderRowCard.getId());
		stringBuilder.append(",");
	}else if(orderRowCard.get("DeliveredQuantity") &lt; orderRowCard.get("Quantity")){
		exit = false; //not completely delivered
	}
}
orderRowsIdList = stringBuilder.toString();
iterator = 0;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1019" YCoordinate="295"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act7">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra20"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra21"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1044" YCoordinate="385"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02b.4-SelectRow" Name="SYS02b.4 - Select order row">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">String[] parts = orderRowsIdList.split(",");
if(iterator &lt; parts.length){
	orderRowId = Long.parseLong(parts[(int) iterator]);
	orderRowCard = cmdb.existingCard("PurchaseOrderRow",orderRowId).fetch();
    OrderRowBrand = orderRowCard.get("Brand");
	OrderRowModel = orderRowCard.get("Model");
	OrderRowCMDBClass = orderRowCard.get("CMDBClass");
	OrderRow = cmdb.referenceTypeFrom(orderRowCard);
}else{
	exit = true;
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1172" YCoordinate="378"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act8">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra22"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra23"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1043" YCoordinate="518"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02c.3-OrderDelivered" Name="SYS02c.3 - Order delivered">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">boolean delivered = true;
boolean notdelivered = true;
orderRowCardList = cmdb.queryClass("PurchaseOrderRow")
				.with("Order",Order)
				.fetch();
for(row : orderRowCardList){
	if(row.get("DeliveredQuantity") &lt; row.get("Quantity")){
		delivered = false;
	}
	if(row.get("DeliveredQuantity") &gt; 0){
		notdelivered = false;
	}
}
if(delivered){
	deliveredId = cmdb.selectLookupByCode("PurchaseOrder - State","Delivered").getId();
	cmdb.existingCard("PurchaseOrder",Order.getId())
		.with("State",deliveredId)
		.update();
}else if(notdelivered){
	notDeliveredId = cmdb.selectLookupByCode("PurchaseOrder - State","NotDelivered").getId();
	cmdb.existingCard("PurchaseOrder",Order.getId())
		.with("State",notDeliveredId)
		.update();
}else{
	partDeliveredId = cmdb.selectLookupByCode("PurchaseOrder - State","PartiallyDelivered").getId();
	cmdb.existingCard("PurchaseOrder",Order.getId())
		.with("State",partDeliveredId)
		.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1415" YCoordinate="175"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02b.5-CheckFormName" Name="SYS02b.5 - Check form name">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(formLibrary);

error = false;

// select the className and load the form model associated to it
String className = OrderRowCMDBClass.getCode();
formName = findFormName(className);
logger.debug("formName {}", formName);

if(StringUtils.isBlank(formName)) {
	error = true;
	logger.warn("form not found");
	Message = cmdb.selectLookupByCode("ITProc - Message","AM-FormNotFound");
} else {
	formModel = loadFormModel(formName);
	logger.debug("formModel {}", formModel);

	form = cmdb.queryClass("AMForm") //
			.withCode(formName) //
			.fetch() //
			.get(0);

	formFunctionData = form.get("FunctionData");
	formId = form.getId();

	logger.debug("formFunctionData {}", formFunctionData);
	Message = cmdb.selectLookupByCode("ITProc - Message","AM-DeliveredAssetsInstructions");
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra101"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra26"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1175" YCoordinate="279"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS02c.2-CheckDeliveryCompleted" Name="SYS02c.2 - Check delivery completed">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">orderRowList = cmdb.queryClass("PurchaseOrderRow")
		.with("Order",Order.getId())
		.with("EarlyClosure", false)
		.fetch();
exit = true;

//all rows delivered?
for(row : orderRowList){
	if(row.get("Quantity") &gt; row.get("DeliveredQuantity")){
		exit = false;
	}
	if(!exit){
		break;
	}
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1673" YCoordinate="407"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act9">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra29"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra30"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1536" YCoordinate="414"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act10">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra14"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra32"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="1442" YCoordinate="552"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act11">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="439" YCoordinate="348"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act12">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra35"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra36"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="842" YCoordinate="85"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM03-Acceptance" Name="AM03 - Acceptance">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra153"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra42"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to test&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on h.&quot;State&quot; = l.&quot;Id&quot; and l.&quot;Status&quot; = 'A' and l.&quot;Code&quot; = 'Acceptance' where h.&quot;Status&quot; = 'A')/)&quot;&#13;&#10;&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="482" YCoordinate="708"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA03-CheckSelection" Name="BA03 - Check selection">
                    <xpdl:BlockActivity ActivitySetId="BA-CheckSelection"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="624" YCoordinate="709"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS03-UpdateAssets" Name="SYS03 - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">availableid = cmdb.selectLookupByCode("CI - State","Available").getId();

for(hardware : selectedHardware){
	cmdb.newRelation("AssetMgtCI") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("CI",  hardware.getId()) //
			.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  hardware.getId())
		.with("processid", ProcessId)
		.with("direction","=")
		.execute();
	
	hardwareCard = cmdb.existingCard("CI",hardware.getId())
						.with("State",availableid)
						.with("Room",DstWrhouse);

	wrhouseCard = cmdb.existingCard("Room",DstWrhouse.getId()).fetch();
	if(wrhouseCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",wrhouseCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(wrhouseCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",wrhouseCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}
	hardwareCard.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="833" YCoordinate="709"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act15">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra43"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra44"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="760" YCoordinate="717"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act17">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1081" YCoordinate="726"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA03-SetClosureData" Name="BA03 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="953" YCoordinate="711"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act22">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="608" YCoordinate="798"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM05-Withdrawal" Name="AM05 - Withdrawal">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra59"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra155"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstStatus"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Employment"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Destination"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to withdraw&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on h.&quot;State&quot; = l.&quot;Id&quot; and l.&quot;Status&quot; = 'A' and l.&quot;Code&quot; = 'InUse' where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and h.&quot;Status&quot; = 'A' and h.&quot;Assignee&quot;::text='{client:OrigUser.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM05-Withdrawal-ToUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="484" YCoordinate="915"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS05-UpdateAssets" Name="SYS05 - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(functionLibrary);
eval(loggerLibrary);
dstStatusCI = cmdb.selectLookupByCode("CI - State",DstStatus.getCode());
if(dstStatusCI == null || !dstStatusCI.checkValidity()){
	logger.warn("Matching lookup with type 'CI - State' not found for destination state " + DstStatus);
}else{
	logger.warn("Lookup converted from '{}' to '{}'",DstStatus,dstStatusCI);
}

for(hardware : selectedHardware){
	cdHardware = cmdb.cardDescriptorFrom(hardware);
	className = cdHardware.getClassName();
	hardwareCard = cmdb.existingCard(className,hardware.getId())
		.with("State",dstStatusCI)
		.with("Busy",false)
		.with("Employment",Employment)
		.with("Destination",Destination)
		.with("Room",DstWrhouse);
	if(DstStatus.getCode().equals("Available") || DstStatus.getCode().equals("Disused")){
		hardwareCard.with("Assignee", null); 
		hardwareCard.with("FinalUser", null); 
		// update assignment
		endingDate = Calendar.getInstance().getTime();
		cmdb.callFunction("wf_assetmgt_remove_assignment")
			.with("hardwareid",hardware.getId())
			.with("userid",_CurrentUser.getId())
			.with("endingdate",endingDate)
			.execute();
	}

	wrhouseCard = cmdb.existingCard("Room",DstWrhouse.getId()).fetch();
	if(wrhouseCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",wrhouseCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(wrhouseCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",wrhouseCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}
	
	// if computer then clear the EA Microsoft field
	isComputer = checkComputer(className);
	if(isComputer)
		hardwareCard.with("EAMicrosoft","");

	hardwareCard.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1217" YCoordinate="917"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA05-SetClosureData" Name="BA05 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1338" YCoordinate="916"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act20">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1460" YCoordinate="931"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act23">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="605" YCoordinate="1028"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act25">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="615" YCoordinate="1228"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM08-TransferBtwWrhouses" Name="AM08 - Transfer between warehouses">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra89"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra159"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstStatus"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to move&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h where h.&quot;Status&quot; = 'A' and h.&quot;Room&quot;::text='{client:OrigWrhouse.Id}')/)&quot;&#13;&#10;&#13;Required=1&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="484" YCoordinate="1318"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA08-CheckSelection" Name="BA08 - Check selection">
                    <xpdl:BlockActivity ActivitySetId="BA-CheckSelection"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="619" YCoordinate="1318"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act27">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra84"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra85"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="763" YCoordinate="1328"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS19-UpdateAssets" Name="SYS19 - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
dstStatusCI = cmdb.selectLookupByCode("CI - State",DstStatus.getCode());
if(dstStatusCI == null || !dstStatusCI.checkValidity()){
	logger.warn("Matching lookup with type 'CI - State' not found for destination state " + DstStatus);
}else{
	logger.warn("Lookup converted from '{}' to '{}'",DstStatus,dstStatusCI);
}

for(hardware : selectedHardware){
	cmdb.newRelation("AssetMgtCI") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("CI",  hardware.getId()) //
			.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  hardware.getId())
		.with("processid", ProcessId)
		.with("direction","=")
		.execute();
	
	hardwareCard = cmdb.existingCard("CI",hardware.getId())
						.with("State",dstStatusCI)
						.with("Room",DstWrhouse);

	wrhouseCard = cmdb.existingCard("Room",DstWrhouse.getId()).fetch();
	if(wrhouseCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",wrhouseCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(wrhouseCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",wrhouseCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}

	hardwareCard.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="840" YCoordinate="1321"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA08-SetClosureData" Name="BA08 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1075" YCoordinate="1324"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act28">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1193" YCoordinate="1336"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM09-MoveUser" Name="AM09 - Move user">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra103"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra160"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstRoom"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to move&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h where h.&quot;Status&quot; = 'A' and h.&quot;Assignee&quot;::text='{client:OrigUser.Id}')/)&quot;&#13;&#10;DefaultSelection=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h where h.&quot;Status&quot; = 'A' and h.&quot;Assignee&quot;::text='{client:OrigUser.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:OrigUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;User data&quot;"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#10;Template = &quot;AM09-Move-ToUser&quot;&#10;NotifyWith=&quot;Am-EmailReceivedNotification&quot;&#10;Condition = &quot;{js:AM09-Move-ToUser-Condition}&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="483" YCoordinate="1411"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA09-SetClosureData" Name="BA09 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1576" YCoordinate="1418"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM10-Disposal" Name="AM10 - Disposal">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra162"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra161"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Employment"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Destination"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to dispose&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select h.&quot;Id&quot; from &quot;Hardware&quot; h join &quot;LookUp&quot; l on l.&quot;Id&quot; = h.&quot;State&quot; and l.&quot;Code&quot; = 'Disused' where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and  h.&quot;Status&quot; = 'A' and h.&quot;Room&quot;::text='{client:OrigWrhouse.Id}')/)&quot;&#13;&#10;Required=1&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="487" YCoordinate="1504"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS10c-UpdateAssets" Name="SYS10c - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(functionLibrary);
eval(loggerLibrary);
disposedId = cmdb.selectLookupByCode("CI - State","Disposed");
for(refHW : selectedHardware){
	cdHardware = cmdb.cardDescriptorFrom(refHW);
	className = cdHardware.getClassName();
	hardwareCard = cmdb.existingCard(className,refHW.getId())
		.with("Building",null)
		.with("Floor",null)
		.with("Room",null)
		.with("Assignee",null)
		.with("FinalUser",null)
		.with("Employment",Employment)
		.with("Destination",Destination)
		.with("Availability",null)
		.with("State",disposedId)
		.with("Busy",false);
		
	// if computer then clear the EA Microsoft field
	isComputer = checkComputer(className);
	if(isComputer)
		hardwareCard.with("EAMicrosoft","");
	hardwareCard.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1447" YCoordinate="1509"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA10-SetClosureData" Name="BA10 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1581" YCoordinate="1513"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act34">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1704" YCoordinate="1530"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA03-CreateAssets" Name="BA03 - Create assets">
                    <xpdl:BlockActivity ActivitySetId="BA-AssetData"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1511" YCoordinate="280"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS15a-ResumeParent" Name="SYS15a - Resume Parent">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">if(Parent!=null &amp;&amp; Parent.getId()&gt;0) {
	parentProcess=cmdb.cardFrom(Parent);
	parentClassName=parentProcess.getClassName();
	parentId=parentProcess.getId();
	
	cmdb.existingProcessInstance(parentClassName, parentId).resume();
	
	cmdb.existingProcessInstance(parentClassName, parentId).with("CurrentUser",_CurrentUser).advance();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1535" YCoordinate="79"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM05b-Check" Name="AM05b - Check">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="733" YCoordinate="916"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS05a-Initialize" Name="SYS05a - Initialize">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">// create relations to be used in widgets
//selectedHardware = new org.cmdbuild.workflow.type.ReferenceType[]{Hardware};
DstUser = OrigUser;

for(refHW : selectedHardware){
	if(Hardware==null || Hardware.getId()&lt;=0)
		Hardware = refHW;
	
	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","+")
		.execute();
}
Message = null;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="613" YCoordinate="914"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM05c-Execution" Name="AM05c - Execution">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5140&quot;&#13;&#10;ButtonLabel=&quot;Stampa ricevuta per l'utente&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="972" YCoordinate="916"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS05b-Assign" Name="SYS05b - Assign to technician">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="850" YCoordinate="915"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS11a-Initialize" Name="SYS11a - Initialize">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">// create relations to be used in widgets

for(refHW : selectedHardware){
	Hardware = refHW;
	cdHardware = cmdb.cardFrom(Hardware);
	EDPNumber = cdHardware.get("EDPNumber");

	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();


}

for(refSW : selectedSoftware){

	cmdb.newRelation("AssetMgtSWCatalogue") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("SWCatalogue",  refSW.getId()) //
			.create();
}

for(refHW : selectedHardware){
	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","-")
		.execute();

}

if(SameUser) {
	FinalUser = DstUser;
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="839" YCoordinate="1113"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS11-UpdateAssets" Name="SYS11 - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">inuseId = cmdb.selectLookupByCode("CI - State","InUse").getId();

for(refHW : selectedHardware){
	
	Hardware = refHW;
	
	// create relations with software

	for(refSW : selectedSoftware) {
		cdSoftware = cmdb.cardFrom(refSW);
		swInstanceType = cdSoftware.get("Type").getCode();		
		cmdb.newCard(swInstanceType)
			.with("Hardware", refHW.getId())
			.with("Product", refSW.getId())
			.create();
		
	}

	hardwareCard = cmdb.existingCard("Hardware",refHW.getId())
		.with("Busy",false);
	

}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1437" YCoordinate="1119"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM11-AddSoftware" Name="AM11 - Add Software">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra157"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra75"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Policy"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware to enhance&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; h where (h.&quot;Busy&quot; is null or h.&quot;Busy&quot; &lt;&gt; true) and  &quot;Assignee&quot;::text = '{client:DstUser.Id}')/)&quot;&#13;&#10;&#13;SingleSelect=1&#13;&#10;selectedHardware"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10;ButtonLabel=&quot;Hardware currently assigned to the user&quot;&#13;&#10;Filter=&quot;from Hardware where Id in (/(select &quot;Id&quot; from &quot;Hardware&quot; where &quot;Assignee&quot;::text = '{client:DstUser.Id}')/)&quot;&#13;&#10;NoSelect=1"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10;ButtonLabel=&quot;Software to install&quot;&#13;&#10;Filter=&quot;from SWCatalogue where Id in (/( select &quot;Id&quot; from &quot;SWCatalogue&quot; where &quot;Status&quot;='A' and &quot;Type&quot; is not null )/)&quot;&#13;&#10;Required=1&#13;&#10;selectedSoftware"/>
                        <xpdl:ExtendedAttribute Name="createModifyCard" Value="ClassName=&quot;Employee&quot;&#13;&#10;ObjId=client:DstUser&#13;&#10;ReadOnly=1&#13;&#10;ButtonLabel=&quot;User data&quot;"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM04-Assignment-ToUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="486" YCoordinate="1115"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM11b-Check1" Name="AM11b - Check">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="963" YCoordinate="1116"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM11c-Execution1" Name="AM11c - Execution">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Policy"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;SWCatalogue&quot;&#13;&#10; ButtonLabel=&quot;Software selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from SWCatalogue where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtSWCatalogue&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5123_110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa policy&quot;&#13;&#10;ForcePDF=1&#13;&#10;NumeroEDP=EDPNumber&#13;&#10;AssegnatarioID=AssegnatarioID&#13;&#10;UtilizzatoreID=UtilizzatoreID&#13;&#10;ProcessID=ProcessId&#13;&#10;tipoPolicy=&quot;PC&quot;&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReportPolicyURL"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1188" YCoordinate="1116"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS11b-Assign" Name="SYS11b - Assign to technician">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
AssegnatarioID = DstUser.getId();
UtilizzatoreID = FinalUser.getId();</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1075" YCoordinate="1115"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act221">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1695" YCoordinate="1133"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA11-SetClosureData" Name="BA11 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1566" YCoordinate="1120"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act212">
                    <xpdl:Route GatewayType="Exclusive"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Exclusive">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra121"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra531"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,229,124" Height="43" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="43">
                            <xpdl:Coordinates XCoordinate="759" YCoordinate="1124"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA11-CheckSelection" Name="BA11 - Check selection">
                    <xpdl:BlockActivity ActivitySetId="BA-CheckSelection"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="629" YCoordinate="1115"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM09b-Check" Name="AM09b - Check">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="customForm" Value="ButtonLabel=&quot;Update EAM field&quot;&#13;&#10;Layout=&quot;grid&quot;&#13;&#10;ModelType=&quot;form&quot;&#13;&#10;FormModel=formEAMModel&#13;&#10;DataType=&quot;function&quot;&#13;&#10;FunctionData=&quot;wf_piaggio_am_eamlist&quot;&#13;&#10;processid=ProcessId&#13;&#10;AddDisabled=&quot;true&quot;&#13;&#10;CloneDisabled=&quot;true&quot;&#13;&#10;ImportDisabled=&quot;true&quot;&#13;&#10;ExportDisabled=&quot;true&quot;&#13;&#10;SerializationType = &quot;text&quot;&#13;&#10;    KeyValueSeparator = keyvalueSeparator&#13;&#10;    AttributesSeparator = attrSeparator&#13;&#10;    RowsSeparator = rowSeparator&#13;&#10;computerEAMlist"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="737" YCoordinate="1414"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS09a-Initialize" Name="SYS09a - Initialize">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">// create relations to be used in widgets

for(refHW : selectedHardware){
	Hardware = refHW;
	cdHardware = cmdb.cardFrom(Hardware);
	EDPNumber = cdHardware.get("EDPNumber");
	
	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();


	cmdb.newRelation("AssetMgtCI") //
		.withCard1("AssetMgt",  ProcessId) //
		.withCard2("CI",  refHW.getId()) //
		.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","=")
		.execute();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="614" YCoordinate="1414"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS09c-UpdateAssets" Name="SYS09c - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">for(refHW : selectedHardware){		
	hardwareCard = cmdb.existingCard("Hardware",refHW.getId())
		.with("Busy",false)
		.with("Room",DstRoom);

	roomCard = cmdb.existingCard("Room",DstRoom.getId()).fetch();
	if(roomCard.get("Floor").checkValidity()){
		floorCard = cmdb.existingCard("Floor",roomCard.get("Floor").getId()) //
				.fetch();
		hardwareCard.with("Floor",floorCard.getId());
	}
	if(roomCard.get("Building").checkValidity()){
		buildingCard = cmdb.existingCard("Building",roomCard.get("Building").getId()) //
				.fetch();
		hardwareCard.with("Building",buildingCard.getId());
	}

	hardwareCard.update();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1438" YCoordinate="1417"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS09b-Assign" Name="SYS09b - Assign to technician">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">eval(loggerLibrary);
eval(functionLibrary);
	
currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
	
// update EAM

if(computerEAMlist != null &amp;&amp; computerEAMlist!= "") {

	String[] parts = computerEAMlist.split(rowSeparator);
	for (String card : parts) {
		if(card == null || card.isEmpty()){
			continue;
		}
		logger.warn("build card {}",card);
		String[] attributes = card.split(attrSeparator);

		eam = "";
		computerID = "";

		for(String attribute : attributes){
			logger.warn("deserialize attribute {}",attribute);
			String[] keyValue = attribute.split(keyvalueSeparator); 
			if(keyValue.length&gt;1) {		
				String name = keyValue[0];
				String value = keyValue[1];
				logger.warn("name is {}",name);
				logger.warn("string value is {}",value);
				if(name.equalsIgnoreCase("EAMicrosoft")) 
					eam = value;
				if(name.equalsIgnoreCase("Computer")) 
					computerID = value;
			}
		}
	
		try {
			if(isValidValue(eam) &amp;&amp; StringUtils.isNumeric(eam)) { 
				lkpEam = cmdb.selectLookupById(Long.parseLong(eam));
				if(lkpEam!=null) {
					refComputer = cmdb.referenceTypeFrom(computerID);
					cdComputer = cmdb.cardDescriptorFrom(refComputer);
					cmdb.existingCard(cdComputer.getClassName(),cdComputer.getId())
						.with("EAMicrosoft",lkpEam)
						.update();
				} else
					logger.warn("Eam not found for ID {}",eam);
			} else
				logger.warn("Eam empty");
		} catch(e) {
			logger.warn("Update of card {} with EAM {} failed",computerID,eam);
		}
	}
} else
	logger.warn("Eam computer list empty");</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1005" YCoordinate="1415"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM09c-Execution" Name="AM09c - Execution">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="DstRoom"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType= &quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5119_RFIT110002&quot;&#13;&#10;ButtonLabel=&quot;Stampa scheda tecnica&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;&#13;&#10;ReturnString"/>
                        <xpdl:ExtendedAttribute Name="createReport" Value="ReportType=&quot;custom&quot;&#13;&#10;ReportCode=&quot;CMHW5139&quot;&#13;&#10;ButtonLabel=&quot;Stampa Checklist PDL&quot;&#13;&#10;ForcePDF=1&#13;&#10;ProcessID=ProcessId&#13;&#10;Azienda=&quot;IT10&quot;&#13;&#10;Lingua=&quot;IT&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1114" YCoordinate="1417"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act201">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1703" YCoordinate="1431"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA04-RM-closure2">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra143"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra124"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra166"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra145"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1099" YCoordinate="915"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA11-RM-closure">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra126"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra141"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra164"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra148"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1315" YCoordinate="1118"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA04-RM-closure5">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra140"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra151"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra139"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra172"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1324" YCoordinate="1506"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA04-RM-closure6">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra134"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra129"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra152"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra150"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1316" YCoordinate="1415"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA04-RM-closure51">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="962" YCoordinate="1323"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM10c-Execution" Name="AM10c - Execution">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="OrigWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Employment"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Destination"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1197" YCoordinate="1505"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS10a-Initialize" Name="SYS10a - Initialize">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">// create relations to be used in widgets

for(refHW : selectedHardware){
	
	// update flag
	cardDescrHardware = cmdb.cardDescriptorFrom(refHW);
	cmdb.existingCard(cardDescrHardware.getClassName(),cardDescrHardware.getId())
		.with("Busy",true)
		.update();

	cmdb.newRelation("AssetMgtCI") //
			.withCard1("AssetMgt",  ProcessId) //
			.withCard2("CI",  refHW.getId()) //
			.create();

	cmdb.callFunction("wf_assetmgt_direction")
		.with("hardwareid",  refHW.getId())
		.with("processid", ProcessId)
		.with("direction","-")
		.execute();
}</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="845" YCoordinate="1504"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS10b-Assign" Name="SYS10b - Assign to technician">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1083" YCoordinate="1507"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM10b-Check" Name="AM10b - Check">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="OrigWrhouse"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                        <xpdl:ExtendedAttribute Name="linkCards" Value="ClassName=&quot;Hardware&quot;&#13;&#10; ButtonLabel=&quot;Hardware selezionato&quot;&#13;&#10; NoSelect=1&#13;&#10; Filter=&quot;from Hardware where Id in (/(select &quot;IdObj2&quot; from &quot;Map_AssetMgtCI&quot; where &quot;IdObj1&quot;={xa:process} and &quot;Status&quot;='A')/)&quot;&#13;&#10; process=ProcessId"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="972" YCoordinate="1507"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act38">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="43" YCoordinate="1022"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS20b-Assign" Name="SYS20b - Assign to technician">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">currentGroup ="TecnicoInstallatoreDFM";
RealStartDate = Calendar.getInstance().getTime();
if(SameUser) {
	FinalUser = DstUser;
}
System.out.println("Value for Cancel is:"+Cancel.toString());</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1082" YCoordinate="1598"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM20c-Execution" Name="AM20c - Execution">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Outcome"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="TechnicianNotes"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1196" YCoordinate="1596"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA20-RM-closure">
                    <xpdl:BlockActivity ActivitySetId="BA-RM-Review"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra1401"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra1511"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra163"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra173"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1323" YCoordinate="1597"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="Process_assetmgt_act341">
                    <xpdl:Event>
                        <xpdl:EndEvent Result="None"/>
                    </xpdl:Event>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="236,120,98" Height="31" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="31">
                            <xpdl:Coordinates XCoordinate="1703" YCoordinate="1621"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA20-SetClosureData" Name="BA20 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1580" YCoordinate="1604"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS20c-UpdateAssets" Name="SYS10c - Update assets">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">// nothing to do</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="1446" YCoordinate="1600"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="AM20-Generic" Name="AM20 - Generic request">
                    <xpdl:Implementation>
                        <xpdl:No/>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer>currentGroup</xpdl:Performer>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra60"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra137"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:ExtendedAttributes>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Message"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Number"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="CreationTimestamp"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="Subject"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_VIEW" Value="ExtDescription"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="ManagerNotes"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="Technician"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="DstUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="FinalUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SameUser"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedStartDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATEREQUIRED" Value="PlannedEndDate"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="SendEmail"/>
                        <xpdl:ExtendedAttribute Name="VariableToProcess_UPDATE" Value="Cancel"/>
                        <xpdl:ExtendedAttribute Name="openAttachment" Value="ButtonLabel=&quot;Upload attachments&quot;"/>
                        <xpdl:ExtendedAttribute Name="manageEmail" Value="ButtonLabel=&quot;Email&quot;&#13;&#10;Template = &quot;AM04-Assignment-ToUser&quot;&#13;&#10;Condition=&quot;{client:SendEmail}&quot;"/>
                    </xpdl:ExtendedAttributes>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="187,247,190" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="486" YCoordinate="1595"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA06-SetClosureData1" Name="BA06 - Set closure data">
                    <xpdl:BlockActivity ActivitySetId="BA-SetClosureData"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="121" YCoordinate="1007"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="SYS20-CancelParent" Name="SYS20 Cancel Parent">
                    <xpdl:Implementation>
                        <xpdl:Task>
                            <xpdl:TaskScript>
                                <xpdl:Script ScriptType="text/java">requestToCancel=true;</xpdl:Script>
                            </xpdl:TaskScript>
                        </xpdl:Task>
                    </xpdl:Implementation>
                    <xpdl:Performers>
                        <xpdl:Performer/>
                    </xpdl:Performers>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Join Type="Exclusive"/>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,255,204" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="227" YCoordinate="1007"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA-CheckEAMicrosoft11">
                    <xpdl:BlockActivity ActivitySetId="ASE-CheckEMicrosoft"/>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="867" YCoordinate="1412"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA04-Assignment">
                    <xpdl:BlockActivity ActivitySetId="ASE-Assignment"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra51"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra154"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="483" YCoordinate="784"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA06-Replacement">
                    <xpdl:BlockActivity ActivitySetId="ASE-Replacement"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra65"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra156"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="483" YCoordinate="1011"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
                <xpdl:Activity Id="BA07-Transfer">
                    <xpdl:BlockActivity ActivitySetId="ASE-Transer"/>
                    <xpdl:TransitionRestrictions>
                        <xpdl:TransitionRestriction>
                            <xpdl:Split Type="Parallel">
                                <xpdl:TransitionRefs>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra158"/>
                                    <xpdl:TransitionRef Id="Process_assetmgt_tra76"/>
                                </xpdl:TransitionRefs>
                            </xpdl:Split>
                        </xpdl:TransitionRestriction>
                    </xpdl:TransitionRestrictions>
                    <xpdl:NodeGraphicsInfos>
                        <xpdl:NodeGraphicsInfo BorderColor="0,0,0" FillColor="255,165,121" Height="60" IsVisible="true" LaneId="Package_assetmgt_pool1_lan1" ToolId="JaWE" Width="90">
                            <xpdl:Coordinates XCoordinate="483" YCoordinate="1214"/>
                        </xpdl:NodeGraphicsInfo>
                    </xpdl:NodeGraphicsInfos>
                </xpdl:Activity>
            </xpdl:Activities>
            <xpdl:Transitions>
                <xpdl:Transition From="Process_assetmgt_act1" Id="Process_assetmgt_tra1" To="AM01-ChooseType">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra3" To="AM02a-GRHeader">
                    <xpdl:Condition Type="CONDITION">"GoodReceipt".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="425" YCoordinate="91"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS01-SetOpeningData" Id="Process_assetmgt_tra4" To="Process_assetmgt_act3">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM02a-GRHeader" Id="Process_assetmgt_tra5" To="Process_assetmgt_act5">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act5" Id="Process_assetmgt_tra6" Name="close" To="SYS02c.4-SetClosureData">
                    <xpdl:Condition Type="CONDITION">GRHeaderAction.getCode().equals("Close")</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="586" YCoordinate="262"/>
                            <xpdl:Coordinates XCoordinate="1402" YCoordinate="259"/>
                            <xpdl:Coordinates XCoordinate="1402" YCoordinate="128"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS15a-ResumeParent" Id="Process_assetmgt_tra7" To="Process_assetmgt_act2">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act5" Id="Process_assetmgt_tra8" To="SYS02a.1-LoadMessage">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02a.1-LoadMessage" Id="Process_assetmgt_tra9" To="AM02b1-GROrderRows">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.4-SelectRow" Id="Process_assetmgt_tra10" To="SYS02b.5-CheckFormName">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act6" Id="Process_assetmgt_tra11" To="AM02b2-GRConfirm">
                    <xpdl:Condition Type="CONDITION">Message != null &amp;&amp; Message.checkValidity()</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.1-CheckConfirmRequired" Id="Process_assetmgt_tra12" To="Process_assetmgt_act6">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM02b2-GRConfirm" Id="Process_assetmgt_tra13" To="Process_assetmgt_act4">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act6" Id="Process_assetmgt_tra15" Name="no confirm required" To="SYS02b.2-UpdateOrderRows">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act4" Id="Process_assetmgt_tra16" To="AM02b1-GROrderRows">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1359" YCoordinate="23"/>
                            <xpdl:Coordinates XCoordinate="800" YCoordinate="21"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act4" Id="Process_assetmgt_tra17" Name="confirm early closure" To="SYS02b.2-UpdateOrderRows">
                    <xpdl:Condition Type="CONDITION">Confirm</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1359" YCoordinate="218"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.2-UpdateOrderRows" Id="Process_assetmgt_tra18" To="SYS02b.3-StartIteration">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.3-StartIteration" Id="Process_assetmgt_tra19" To="Process_assetmgt_act7">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act7" Id="Process_assetmgt_tra20" Name="at least one row" To="SYS02b.4-SelectRow">
                    <xpdl:Condition Type="CONDITION">orderRowsIdList != null &amp;&amp; !orderRowsIdList.isEmpty() &amp;&amp; !",".equals(orderRowsIdList) &amp;&amp; orderRowsIdList.split(",").length &gt; 0</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act7" Id="Process_assetmgt_tra21" To="Process_assetmgt_act8">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act8" Id="Process_assetmgt_tra22" Name="still rows not delivered" To="SYS02a.1-LoadMessage">
                    <xpdl:Condition Type="CONDITION">!exit</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="695" YCoordinate="541"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act8" Id="Process_assetmgt_tra23" To="SYS02c.3-OrderDelivered">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1482" YCoordinate="540"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02c.3-OrderDelivered" Id="Process_assetmgt_tra24" To="SYS02c.4-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act9" Id="Process_assetmgt_tra29" Name="loop completed" To="SYS02c.2-CheckDeliveryCompleted">
                    <xpdl:Condition Type="CONDITION">iterator == orderRowsIdList.split(",").length</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA03-CreateAssets" Id="Process_assetmgt_tra28" To="Process_assetmgt_act9">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act9" Id="Process_assetmgt_tra30" To="SYS02b.4-SelectRow">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1592" YCoordinate="480"/>
                            <xpdl:Coordinates XCoordinate="1256" YCoordinate="479"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02c.2-CheckDeliveryCompleted" Id="Process_assetmgt_tra31" To="Process_assetmgt_act10">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1762" YCoordinate="572"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act10" Id="Process_assetmgt_tra32" Name="no more rows" To="SYS02c.3-OrderDelivered">
                    <xpdl:Condition Type="CONDITION">exit</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra34" To="Process_assetmgt_act11">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act12" Id="Process_assetmgt_tra35" To="SYS02b.1-CheckConfirmRequired">
                    <xpdl:Condition Type="CONDITION">orderRows != null &amp;&amp; !orderRows.isEmpty()</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act12" Id="Process_assetmgt_tra36" Name="no rows" To="SYS02c.4-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="898" YCoordinate="35"/>
                            <xpdl:Coordinates XCoordinate="1491" YCoordinate="34"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act10" Id="Process_assetmgt_tra14" To="SYS02a.1-LoadMessage">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="684" YCoordinate="576"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra33" To="AM03-Acceptance">
                    <xpdl:Condition Type="CONDITION">"Acceptance".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="441" YCoordinate="735"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act15" Id="Process_assetmgt_tra44" To="SYS03-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">Confirm || Message == null</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA03-CheckSelection" Id="Process_assetmgt_tra45" To="Process_assetmgt_act15">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act15" Id="Process_assetmgt_tra43" To="AM03-Acceptance">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="703" YCoordinate="676"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS03-UpdateAssets" Id="Process_assetmgt_tra48" To="BA03-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA03-SetClosureData" Id="Process_assetmgt_tra49" To="Process_assetmgt_act17">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra50" To="BA04-Assignment">
                    <xpdl:Condition Type="CONDITION">"Assignment".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="437" YCoordinate="812"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra57" To="AM05-Withdrawal">
                    <xpdl:Condition Type="CONDITION">"Withdrawal".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="433" YCoordinate="951"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA05-SetClosureData" Id="Process_assetmgt_tra63" To="Process_assetmgt_act20">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra64" To="BA06-Replacement">
                    <xpdl:Condition Type="CONDITION">"Replacement".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="429" YCoordinate="1062"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra74" To="BA07-Transfer">
                    <xpdl:Condition Type="CONDITION">"TransferBtwUsers".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="421" YCoordinate="1256"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra81" To="AM08-TransferBtwWrhouses">
                    <xpdl:Condition Type="CONDITION">"TransferBtwWarehouses".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="417" YCoordinate="1369"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA08-CheckSelection" Id="Process_assetmgt_tra83" To="Process_assetmgt_act27">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act27" Id="Process_assetmgt_tra84" To="AM08-TransferBtwWrhouses">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="698" YCoordinate="1296"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act27" Id="Process_assetmgt_tra85" To="SYS19-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">Confirm || Message == null</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS19-UpdateAssets" Id="Process_assetmgt_tra86" To="BA04-RM-closure51">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA08-SetClosureData" Id="Process_assetmgt_tra87" To="Process_assetmgt_act28">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra88" To="AM09-MoveUser">
                    <xpdl:Condition Type="CONDITION">"MoveUser".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="413" YCoordinate="1456"/>
                        </xpdl:ConnectorGraphicsInfo>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                            <xpdl:Coordinates XCoordinate="0" YCoordinate="0"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra102" To="AM10-Disposal">
                    <xpdl:Condition Type="CONDITION">"Disposal".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="409" YCoordinate="1539"/>
                        </xpdl:ConnectorGraphicsInfo>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                            <xpdl:Coordinates XCoordinate="0" YCoordinate="0"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS10c-UpdateAssets" Id="Process_assetmgt_tra107" To="BA10-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA10-SetClosureData" Id="Process_assetmgt_tra108" To="Process_assetmgt_act34">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM01-ChooseType" Id="Process_assetmgt_tra2" To="SYS01-SetOpeningData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.5-CheckFormName" Id="Process_assetmgt_tra101" To="AM02b1-GROrderRows">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="806" YCoordinate="284"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02b.5-CheckFormName" Id="Process_assetmgt_tra26" To="BA03-CreateAssets">
                    <xpdl:Condition Type="CONDITION">!error</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM02b1-GROrderRows" Id="Process_assetmgt_tra25" To="Process_assetmgt_act12">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS02c.4-SetClosureData" Id="Process_assetmgt_tra112" To="SYS15a-ResumeParent">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS05a-Initialize" Id="Process_assetmgt_tra117" To="AM05b-Check">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM05b-Check" Id="Process_assetmgt_tra118" To="SYS05b-Assign">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS05b-Assign" Id="Process_assetmgt_tra119" To="AM05c-Execution">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM05c-Execution" Id="Process_assetmgt_tra120" To="BA04-RM-closure2">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS11b-Assign" Id="Process_assetmgt_tra1161" To="AM11c-Execution1">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS11a-Initialize" Id="Process_assetmgt_tra1151" To="AM11b-Check1">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM11c-Execution1" Id="Process_assetmgt_tra1141" To="BA11-RM-closure">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM11b-Check1" Id="Process_assetmgt_tra1131" To="SYS11b-Assign">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-SetClosureData" Id="Process_assetmgt_tra561" To="Process_assetmgt_act221">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act212" Id="Process_assetmgt_tra531" To="SYS11a-Initialize">
                    <xpdl:Condition Type="CONDITION">Confirm || Message == null</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-CheckSelection" Id="Process_assetmgt_tra521" To="Process_assetmgt_act212">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act212" Id="Process_assetmgt_tra121" To="AM11-AddSoftware">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="707" YCoordinate="1092"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra122" To="AM11-AddSoftware">
                    <xpdl:Condition Type="CONDITION">"AddSoftware".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="425" YCoordinate="1153"/>
                        </xpdl:ConnectorGraphicsInfo>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                            <xpdl:Coordinates XCoordinate="0" YCoordinate="0"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM09c-Execution" Id="Process_assetmgt_tra1201" To="BA04-RM-closure6">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS09b-Assign" Id="Process_assetmgt_tra1191" To="AM09c-Execution">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM09b-Check" Id="Process_assetmgt_tra1181" To="BA-CheckEAMicrosoft11">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS09a-Initialize" Id="Process_assetmgt_tra1171" To="AM09b-Check">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA09-SetClosureData" Id="Process_assetmgt_tra631" To="Process_assetmgt_act201">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS09c-UpdateAssets" Id="Process_assetmgt_tra621" To="BA09-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure51" Id="Process_assetmgt_tra128" To="BA08-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS10a-Initialize" Id="Process_assetmgt_tra130" To="AM10b-Check">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM10b-Check" Id="Process_assetmgt_tra131" To="SYS10b-Assign">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS10b-Assign" Id="Process_assetmgt_tra132" To="AM10c-Execution">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM10c-Execution" Id="Process_assetmgt_tra133" To="BA04-RM-closure5">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS05-UpdateAssets" Id="Process_assetmgt_tra62" To="BA05-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS11-UpdateAssets" Id="Process_assetmgt_tra135" To="BA11-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure6" Id="Process_assetmgt_tra134" To="AM09c-Execution">
                    <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1296" YCoordinate="1415"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure5" Id="Process_assetmgt_tra140" To="AM10c-Execution">
                    <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1340" YCoordinate="1498"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-RM-closure" Id="Process_assetmgt_tra141" To="AM11c-Execution1">
                    <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1329" YCoordinate="1105"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure2" Id="Process_assetmgt_tra143" To="AM05c-Execution">
                    <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1114" YCoordinate="925"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure2" Id="Process_assetmgt_tra124" To="SYS05-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-RM-closure" Id="Process_assetmgt_tra126" To="SYS11-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure6" Id="Process_assetmgt_tra129" To="SYS09c-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure5" Id="Process_assetmgt_tra151" To="SYS10c-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM03-Acceptance" Id="Process_assetmgt_tra153" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="269" YCoordinate="767"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-Assignment" Id="Process_assetmgt_tra154" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="300" YCoordinate="817"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM05-Withdrawal" Id="Process_assetmgt_tra155" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="313" YCoordinate="961"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA06-Replacement" Id="Process_assetmgt_tra156" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM11-AddSoftware" Id="Process_assetmgt_tra157" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="328" YCoordinate="1135"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA07-Transfer" Id="Process_assetmgt_tra158" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="317" YCoordinate="1234"/>
                        </xpdl:ConnectorGraphicsInfo>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM08-TransferBtwWrhouses" Id="Process_assetmgt_tra159" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="306" YCoordinate="1341"/>
                        </xpdl:ConnectorGraphicsInfo>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="LABEL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="500" YCoordinate="10"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM09-MoveUser" Id="Process_assetmgt_tra160" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="295" YCoordinate="1436"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM10-Disposal" Id="Process_assetmgt_tra161" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="285" YCoordinate="1528"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM03-Acceptance" Id="Process_assetmgt_tra42" To="BA03-CheckSelection">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM05-Withdrawal" Id="Process_assetmgt_tra59" To="SYS05a-Initialize">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM11-AddSoftware" Id="Process_assetmgt_tra75" To="BA11-CheckSelection">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM08-TransferBtwWrhouses" Id="Process_assetmgt_tra89" To="BA08-CheckSelection">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM09-MoveUser" Id="Process_assetmgt_tra103" To="SYS09a-Initialize">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM10-Disposal" Id="Process_assetmgt_tra162" To="SYS10a-Initialize">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA20-RM-closure" Id="Process_assetmgt_tra1511" To="SYS20c-UpdateAssets">
                    <xpdl:Condition Type="CONDITION">"COM".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA20-RM-closure" Id="Process_assetmgt_tra1401" To="AM20c-Execution">
                    <xpdl:Condition Type="CONDITION">"SCH".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_BEZIER" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1341" YCoordinate="1602"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM20c-Execution" Id="Process_assetmgt_tra1331" To="BA20-RM-closure">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS20b-Assign" Id="Process_assetmgt_tra1321" To="AM20c-Execution">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA20-SetClosureData" Id="Process_assetmgt_tra1081" To="Process_assetmgt_act341">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS20c-UpdateAssets" Id="Process_assetmgt_tra1071" To="BA20-SetClosureData">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="Process_assetmgt_act3" Id="Process_assetmgt_tra73" To="AM20-Generic">
                    <xpdl:Condition Type="CONDITION">"Generic".equals(Type.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,153,153" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="405" YCoordinate="1632"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure5" Id="Process_assetmgt_tra139" To="AM10-Disposal">
                    <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1400" YCoordinate="1487"/>
                            <xpdl:Coordinates XCoordinate="571" YCoordinate="1489"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure6" Id="Process_assetmgt_tra152" To="AM09-MoveUser">
                    <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1405" YCoordinate="1391"/>
                            <xpdl:Coordinates XCoordinate="558" YCoordinate="1391"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA20-RM-closure" Id="Process_assetmgt_tra163" To="AM20-Generic">
                    <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1404" YCoordinate="1574"/>
                            <xpdl:Coordinates XCoordinate="584" YCoordinate="1576"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-RM-closure" Id="Process_assetmgt_tra164" To="AM11-AddSoftware">
                    <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1388" YCoordinate="1092"/>
                            <xpdl:Coordinates XCoordinate="573" YCoordinate="1092"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure2" Id="Process_assetmgt_tra166" To="AM05-Withdrawal">
                    <xpdl:Condition Type="CONDITION">"BAC".equalsIgnoreCase(FinalAction.getCode())</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1180" YCoordinate="897"/>
                            <xpdl:Coordinates XCoordinate="581" YCoordinate="898"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA06-SetClosureData1" Id="Process_assetmgt_tra168" To="Process_assetmgt_act38">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="SYS20-CancelParent" Id="Process_assetmgt_tra58" To="BA06-SetClosureData1">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM20-Generic" Id="Process_assetmgt_tra60" To="SYS20-CancelParent">
                    <xpdl:Condition Type="CONDITION">Cancel</xpdl:Condition>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_ORTHOGONAL" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="275" YCoordinate="1618"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure2" Id="Process_assetmgt_tra145" To="BA05-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1308" YCoordinate="901"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA11-RM-closure" Id="Process_assetmgt_tra148" To="BA11-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1513" YCoordinate="1100"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure6" Id="Process_assetmgt_tra150" To="BA09-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1516" YCoordinate="1379"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-RM-closure5" Id="Process_assetmgt_tra172" To="BA10-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1516" YCoordinate="1490"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA20-RM-closure" Id="Process_assetmgt_tra173" To="BA20-SetClosureData">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE">
                            <xpdl:Coordinates XCoordinate="1524" YCoordinate="1577"/>
                        </xpdl:ConnectorGraphicsInfo>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="AM20-Generic" Id="Process_assetmgt_tra137" To="SYS20b-Assign">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA-CheckEAMicrosoft11" Id="Process_assetmgt_tra80" To="SYS09b-Assign">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA04-Assignment" Id="Process_assetmgt_tra51" To="Process_assetmgt_act22">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA06-Replacement" Id="Process_assetmgt_tra65" To="Process_assetmgt_act23">
                    <xpdl:Condition Type="OTHERWISE"/>
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="255,128,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
                <xpdl:Transition From="BA07-Transfer" Id="Process_assetmgt_tra76" To="Process_assetmgt_act25">
                    <xpdl:ConnectorGraphicsInfos>
                        <xpdl:ConnectorGraphicsInfo FillColor="0,0,0" IsVisible="true" Style="NO_ROUTING_SPLINE" ToolId="JaWE"/>
                    </xpdl:ConnectorGraphicsInfos>
                </xpdl:Transition>
            </xpdl:Transitions>
            <xpdl:ExtendedAttributes>
                <xpdl:ExtendedAttribute Name="cmdbuildBindToClass" Value="AssetMgt"/>
            </xpdl:ExtendedAttributes>
        </xpdl:WorkflowProcess>
    </xpdl:WorkflowProcesses>
    <xpdl:ExtendedAttributes>
        <xpdl:ExtendedAttribute Name="EDITING_TOOL" Value="Together Workflow Editor"/>
        <xpdl:ExtendedAttribute Name="EDITING_TOOL_VERSION" Value="5.5-1-20170721-1200-TAB-3.2-1"/>
        <xpdl:ExtendedAttribute Name="JaWE_CONFIGURATION" Value="default"/>
    </xpdl:ExtendedAttributes>
</xpdl:Package>

